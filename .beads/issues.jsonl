{"id":"get-harness-0ta","title":"Add HarnessKind::ALL and Harness constructors","description":"## Context\nPhase 1 of Harness API refactor. Adds new construction and discovery methods without changing existing API.\n\n## Key Changes\n- `src/types.rs` - Add `impl HarnessKind { pub const ALL: \u0026'static [Self] = \u0026[...]; }`\n- `src/harness/mod.rs` - Add `Harness::new(kind) -\u003e Self`\n- `src/harness/mod.rs` - Add `Harness::is_installed(\u0026self) -\u003e bool`\n- `src/harness/mod.rs` - Add `Harness::installed() -\u003e Result\u003cVec\u003cHarness\u003e\u003e`\n\n## Patterns to Follow\n- See `EnvValue::plain()` at `types.rs:208-211` for constructor pattern\n- See `Harness::locate()` at `mod.rs:30-42` for dispatch pattern\n- Use `#[must_use]` on constructors\n\n## Success Criteria\n- [ ] `cargo build` passes\n- [ ] `cargo test harness::` passes\n- [ ] `cargo clippy --all-targets -- -D warnings` clean\n- [ ] New methods have doc comments with examples\n\n## References\n- Full plan: `.beads/artifacts/get-harness-gye/plan.md`\n- Research: `.beads/artifacts/get-harness-gye/research.md`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T11:17:38.461205Z","updated_at":"2025-12-26T11:22:58.228366Z","closed_at":"2025-12-26T11:22:58.228366Z","close_reason":"All Phase 1 requirements implemented: HarnessKind::ALL, Harness::new(), is_installed(), installed(). Coach approved. Build/test/clippy all pass."}
{"id":"get-harness-0yt","title":"Epic: Config Parsing API","description":"Expose the internal MCP config parsers as public API through clean Harness methods.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-27T07:19:32.75963Z","updated_at":"2025-12-27T16:41:28.001738Z","closed_at":"2025-12-27T16:41:28.001738Z","close_reason":"Dependency complete. Public MCP config parsing API implemented and tested.","dependencies":[{"issue_id":"get-harness-0yt","depends_on_id":"get-harness-ozq","type":"blocks","created_at":"2025-12-27T07:21:30.910873Z","created_by":"daemon"}]}
{"id":"get-harness-10b","title":"Implement skills() for Claude Code","description":"Implement skills directory resource for Claude Code.\n\n## Paths\n- Global: ~/.claude/skills/\n- Project: .claude/skills/\n\n## Structure\nEach skill is a directory containing SKILL.md:\n```\nskills/\n  my-skill/\n    SKILL.md\n```\n\n## API\n```rust\nfn skills(\u0026self) -\u003e DirectoryResource {\n    DirectoryResource {\n        global_path: Some(\"~/.claude/skills\"),\n        project_path: Some(\".claude/skills\"),\n        structure: DirectoryStructure::NestedWithMarker(\"SKILL.md\"),\n    }\n}\n```\n\n## Files\n- src/harness/claude_code.rs\n\n## Acceptance Criteria\n- [ ] Return correct DirectoryResource\n- [ ] Handle missing directories gracefully\n- [ ] Unit test","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:37:47.500375Z","updated_at":"2025-12-26T15:17:38.563358Z","closed_at":"2025-12-26T15:17:38.563358Z","close_reason":"Implemented Claude Code skills support - paths ~/.claude/skills/ and .claude/skills/, nested structure with SKILL.md, tests pass","dependencies":[{"issue_id":"get-harness-10b","depends_on_id":"get-harness-gye","type":"blocks","created_at":"2025-12-26T09:40:40.518708Z","created_by":"daemon"}]}
{"id":"get-harness-1ar","title":"Standardize OpenCode directory structure: skills (nested) vs commands (flat)","description":"OpenCode uses inconsistent structures: skills use nested skill/*/SKILL.md, commands use flat command/*.md. Confuses users creating profile directories.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T21:21:53.828282Z","updated_at":"2025-12-29T21:33:38.046362Z","closed_at":"2025-12-29T21:33:38.046362Z","close_reason":"Documented directory structure patterns in README. Code already correct."}
{"id":"get-harness-1zu","title":"Create harness specification document for contributors","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T08:50:29.95978Z","updated_at":"2025-12-26T08:55:50.107296Z","closed_at":"2025-12-26T08:55:50.107296Z","close_reason":"Implemented rules_path and HARNESS_SPEC.md"}
{"id":"get-harness-3e3","title":"[Migration] Create workspace structure locally","description":"Create crates/ directory, git mv src/ to crates/harness-locate/src/, git mv Cargo.toml to crates/harness-locate/. Do NOT rename GitHub repo yet.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-01T14:41:14.755494Z","updated_at":"2026-01-01T14:45:40.233918Z","closed_at":"2026-01-01T14:45:40.233918Z","close_reason":"Completed: created crates/harness-locate/, moved src/ and Cargo.toml with git mv preserving history"}
{"id":"get-harness-3ga","title":"Handle OpenCode dual agent sources: config-based and directory-based","description":"OpenCode has two agent types: config-based (in opencode.jsonc agent.*) and directory-based (~/.config/opencode/agent/*.md). harness-locate only returns directory path, missing config-based agents.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T21:21:55.609606Z","updated_at":"2025-12-29T21:43:18.803158Z","closed_at":"2025-12-29T21:43:18.803158Z","close_reason":"Added agents_config() method. Fixed file pattern bug."}
{"id":"get-harness-4n6","title":"Create src/harness/amp_code.rs module","description":"Create the AMP Code harness module following the existing pattern from claude_code.rs/opencode.rs/goose.rs.\n\n## Configuration Paths\n\n- **Global config**: `~/.config/amp/`\n- **Project config**: None (AMP CLI doesn't use project-scoped config dirs)\n- **Skills (global)**: `~/.config/agents/skills/` (same as Goose)\n- **Skills (project)**: `.agents/skills/`\n- **Commands (global)**: `~/.config/amp/commands/`\n- **Commands (project)**: `.agents/commands/`\n- **Rules (global)**: `~/.config/amp/AGENTS.md`\n- **Rules (project)**: `AGENTS.md` in project root\n- **MCP config**: `~/.config/amp/settings.json` with key path `/amp.mcpServers`\n\n## Functions to Implement\n\n```rust\npub fn global_config_dir() -\u003e Result\u003cPathBuf\u003e\npub fn config_dir(scope: \u0026Scope) -\u003e Result\u003cPathBuf\u003e\npub fn commands_dir(scope: \u0026Scope) -\u003e Result\u003cPathBuf\u003e\npub fn skills_dir(scope: \u0026Scope) -\u003e Option\u003cPathBuf\u003e\npub fn rules_dir(scope: \u0026Scope) -\u003e Option\u003cPathBuf\u003e\npub fn is_installed() -\u003e bool\npub fn parse_mcp_server(value: \u0026serde_json::Value) -\u003e Result\u003cMcpServer\u003e\npub fn parse_mcp_servers(config: \u0026serde_json::Value) -\u003e Result\u003cVec\u003c(String, McpServer)\u003e\u003e\n```\n\n## MCP Format\n\nAMP uses `amp.mcpServers` in settings.json:\n- Stdio: `{\"command\": \"...\", \"args\": [...], \"env\": {...}}`\n- Remote: `{\"url\": \"...\", \"headers\": {...}}`\n- Env vars: `${VAR_NAME}` syntax (same as Claude Code)\n\n## Acceptance Criteria\n- [ ] Module created at src/harness/amp_code.rs\n- [ ] All path functions implemented\n- [ ] MCP parsing works for stdio and remote servers\n- [ ] Unit tests for path resolution\n- [ ] Unit tests for MCP parsing","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T18:00:27.68594Z","updated_at":"2025-12-28T19:13:38.168917Z","closed_at":"2025-12-28T19:13:38.168917Z","close_reason":"Completed: Created amp_code.rs module with path functions, MCP parsing, and tests","dependencies":[{"issue_id":"get-harness-4n6","depends_on_id":"get-harness-zh0","type":"blocks","created_at":"2025-12-28T18:01:37.36302Z","created_by":"d0"}]}
{"id":"get-harness-4n6.1","title":"Add Error::UnsupportedScope variant","description":"## Context\nAdd new error variant for when a harness doesn't support a particular scope (e.g., AMP has no project config dir).\n\n## Key Changes\n- `src/error.rs` - Add `UnsupportedScope { harness: String, scope: String }` variant\n\n## Pattern\nFollow existing error variants like `UnsupportedMcpConfig`. Use #[error(\"...\")] derive macro.\n\n## Success Criteria\n- [ ] New variant compiles\n- [ ] cargo check passes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T19:09:05.614051Z","updated_at":"2025-12-28T19:13:23.83036Z","closed_at":"2025-12-28T19:13:23.83036Z","close_reason":"Completed","dependencies":[{"issue_id":"get-harness-4n6.1","depends_on_id":"get-harness-4n6","type":"parent-child","created_at":"2025-12-28T19:09:05.614503Z","created_by":"daemon"}]}
{"id":"get-harness-4n6.2","title":"Update EnvValue for AmpCode","description":"## Context\nAMP uses ${VAR} env syntax (same as Claude Code). Update EnvValue methods to handle AmpCode.\n\n## Key Changes\n- `src/types.rs` - Update to_native() and from_native() with combined `ClaudeCode | AmpCode` arms\n\n## Pattern\nUse grouped match arms: `HarnessKind::ClaudeCode | HarnessKind::AmpCode =\u003e ...`\n\n## Success Criteria\n- [ ] to_native() handles AmpCode with ${VAR} syntax\n- [ ] from_native() parses ${VAR} for AmpCode\n- [ ] cargo check passes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T19:09:08.305278Z","updated_at":"2025-12-28T19:13:23.832065Z","closed_at":"2025-12-28T19:13:23.832065Z","close_reason":"Completed","dependencies":[{"issue_id":"get-harness-4n6.2","depends_on_id":"get-harness-4n6","type":"parent-child","created_at":"2025-12-28T19:09:08.308467Z","created_by":"daemon"}]}
{"id":"get-harness-4n6.3","title":"Create amp_code.rs module","description":"## Context\nCreate the AMP Code harness module with path resolution and MCP parsing functions.\n\n## Key Changes\n- `src/harness/amp_code.rs` - New file (~700-800 lines)\n\n## Functions to Implement\n- global_config_dir() -\u003e ~/.config/amp/\n- config_dir(scope) -\u003e Global: ~/.config/amp/, Project: Error::UnsupportedScope\n- commands_dir(scope) -\u003e Global: ~/.config/amp/commands/, Project: .agents/commands/\n- skills_dir(scope) -\u003e Global: ~/.config/agents/skills/, Project: .agents/skills/\n- rules_dir(scope) -\u003e Global: ~/.config/amp/AGENTS.md, Project: AGENTS.md\n- mcp_dir(scope) -\u003e Global: ~/.config/amp/, Project: Error::UnsupportedScope\n- is_installed() -\u003e check for amp binary\n- parse_mcp_server(value) -\u003e Parse MCP config (command/args/env/url, ${VAR} syntax)\n- parse_mcp_servers(value) -\u003e Key: amp.mcpServers\n\n## Pattern\nFollow claude_code.rs structure. Use Error::UnsupportedScope for project config.\n\n## Success Criteria\n- [ ] All functions implemented\n- [ ] MCP parsing handles stdio/sse/http\n- [ ] cargo check passes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T19:09:13.758664Z","updated_at":"2025-12-28T19:13:23.833124Z","closed_at":"2025-12-28T19:13:23.833124Z","close_reason":"Completed","dependencies":[{"issue_id":"get-harness-4n6.3","depends_on_id":"get-harness-4n6","type":"parent-child","created_at":"2025-12-28T19:09:13.760612Z","created_by":"daemon"}]}
{"id":"get-harness-4n6.4","title":"Add amp_code.rs tests","description":"## Context\nAdd comprehensive tests for the amp_code module.\n\n## Key Changes\n- `src/harness/amp_code.rs` - Add #[cfg(test)] mod tests section\n\n## Tests to Write\n- Path functions (global_config_dir, commands_dir, skills_dir, rules_dir)\n- MCP parsing (stdio, sse, http servers)\n- Env var syntax (${VAR} parsing)\n- Error cases (missing fields, invalid types)\n\n## Pattern\nFollow claude_code.rs test structure. Use CI guards: skip if platform::config_dir().is_err()\n\n## Success Criteria\n- [ ] All path functions tested\n- [ ] MCP parsing tested for all server types\n- [ ] cargo test passes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T19:09:17.276417Z","updated_at":"2025-12-28T19:13:23.834113Z","closed_at":"2025-12-28T19:13:23.834113Z","close_reason":"Completed","dependencies":[{"issue_id":"get-harness-4n6.4","depends_on_id":"get-harness-4n6","type":"parent-child","created_at":"2025-12-28T19:09:17.278073Z","created_by":"daemon"}]}
{"id":"get-harness-4ow","title":"Implement MCP to_native converter for Goose","description":"Implement mcp_to_native() for Goose.\n\n## IMPORTANT: Use McpCapabilities Validation\n\nBefore converting, validate with `supports_mcp_server()`:\n\n```rust\npub fn mcp_to_native(harness: \u0026Harness, name: \u0026str, server: \u0026McpServer) -\u003e Result\u003cserde_json::Value\u003e {\n    if !harness.supports_mcp_server(server) {\n        return Err(Error::UnsupportedMcpConfig {\n            harness: harness.kind().to_string(),\n            reason: \"Server uses unsupported features\".into(),\n        });\n    }\n    // ... conversion logic\n}\n```\n\nThis catches cases like:\n- HTTP server with OAuth (Goose doesn't support OAuth)\n\n## Goose MCP Format\n- Uses type: stdio/sse/streamable_http\n- cmd not command\n- envs not env\n- uri not url\n- timeout in seconds not ms\n- Requires name and description fields\n\n## Acceptance Criteria\n- [ ] Validates with supports_mcp_server() before converting\n- [ ] Returns Result\u003cValue, Error\u003e\n- [ ] Converts timeout_ms to seconds\n- [ ] Uses cmd/envs/uri field names\n- [ ] Unit tests cover validation failures (e.g., OAuth rejected)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:36:27.625644Z","updated_at":"2025-12-26T13:36:00.212843Z","closed_at":"2025-12-26T13:36:00.212843Z","close_reason":"Implemented mcp_to_native() converters","dependencies":[{"issue_id":"get-harness-4ow","depends_on_id":"get-harness-vvg","type":"blocks","created_at":"2025-12-26T09:40:34.397827Z","created_by":"daemon"}]}
{"id":"get-harness-54p","title":"Implement mcp_from_native parser for Claude Code","description":"Parse Claude Code's native MCP format from ~/.claude.json and .mcp.json into normalized McpServer types.\n\n## Input Format (Claude Code)\n```json\n{\n  \"mcpServers\": {\n    \"server-name\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\"],\n      \"env\": { \"KEY\": \"value\" }\n    }\n  }\n}\n```\n\n## Output\nVec\u003cMcpServer\u003e with normalized types\n\n## Files\n- src/harness/claude_code.rs\n\n## Acceptance Criteria\n- [ ] Parse stdio servers (command + args)\n- [ ] Parse SSE servers (type: sse)\n- [ ] Parse HTTP servers (type: http)\n- [ ] Handle env variable syntax (${VAR})\n- [ ] Unit tests for each server type","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:37:28.153559Z","updated_at":"2025-12-26T13:52:33.603593Z","closed_at":"2025-12-26T13:52:33.603593Z","close_reason":"Implemented with coach-recommended fixes: strict validation for args/env/headers, support for explicit stdio type","dependencies":[{"issue_id":"get-harness-54p","depends_on_id":"get-harness-vvg","type":"blocks","created_at":"2025-12-26T09:40:37.334257Z","created_by":"daemon"}]}
{"id":"get-harness-683","title":"Epic: MCP Validation","description":"Validate MCP server configurations for correctness and harness compatibility. Catches incompatibilities before runtime errors.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-27T07:19:31.17669Z","updated_at":"2025-12-27T14:24:21.861732Z","closed_at":"2025-12-27T14:24:21.861732Z","close_reason":"All child features complete - MCP validation implemented","dependencies":[{"issue_id":"get-harness-683","depends_on_id":"get-harness-qu7","type":"blocks","created_at":"2025-12-27T07:21:27.942892Z","created_by":"daemon"},{"issue_id":"get-harness-683","depends_on_id":"get-harness-dcs","type":"blocks","created_at":"2025-12-27T07:21:28.034367Z","created_by":"daemon"}]}
{"id":"get-harness-6jn","title":"Document singular vs plural directory naming conventions across harnesses","description":"Inconsistent naming: OpenCode uses singular (skill/, command/), Claude Code uses plural (commands/). Users must know correct naming per harness. Need clear documentation.","status":"open","priority":3,"issue_type":"bug","created_at":"2025-12-29T21:21:57.703399Z","updated_at":"2025-12-29T21:21:57.703399Z"}
{"id":"get-harness-6m7","title":"Define McpCapabilities struct","description":"Define the McpCapabilities struct that describes what MCP features each harness supports.\n\n## McpCapabilities Struct\n\n```rust\n#[derive(Debug, Clone, PartialEq, Eq)]\npub struct McpCapabilities {\n    /// Supports local stdio servers\n    pub stdio: bool,\n    \n    /// Supports SSE remote servers\n    pub sse: bool,\n    \n    /// Supports HTTP/Streamable HTTP remote servers\n    pub http: bool,\n    \n    /// Supports OAuth for remote servers\n    pub oauth: bool,\n    \n    /// Supports per-server timeout configuration\n    pub timeout: bool,\n    \n    /// Supports enable/disable toggle\n    pub toggle: bool,\n    \n    /// Supports custom headers for remote servers\n    pub headers: bool,\n    \n    /// Supports working directory (cwd) for stdio\n    pub cwd: bool,\n}\n```\n\n## Implementation per Harness\n\n```rust\nimpl Harness {\n    pub fn mcp_capabilities(\u0026self) -\u003e McpCapabilities {\n        match self.kind {\n            HarnessKind::ClaudeCode =\u003e McpCapabilities {\n                stdio: true,\n                sse: true,\n                http: true,\n                oauth: false,\n                timeout: false,\n                toggle: false,\n                headers: true,\n                cwd: false,\n            },\n            HarnessKind::OpenCode =\u003e McpCapabilities {\n                stdio: true,\n                sse: false,  // Uses 'remote' type\n                http: true,\n                oauth: true,\n                timeout: true,\n                toggle: true,\n                headers: true,\n                cwd: false,\n            },\n            HarnessKind::Goose =\u003e McpCapabilities {\n                stdio: true,\n                sse: true,\n                http: true,  // streamable_http\n                oauth: false,\n                timeout: true,  // In seconds, not ms\n                toggle: true,\n                headers: true,  // Only for streamable_http\n                cwd: false,\n            },\n        }\n    }\n    \n    /// Check if a specific server type is supported\n    pub fn supports_mcp_server(\u0026self, server: \u0026McpServer) -\u003e bool {\n        let caps = self.mcp_capabilities();\n        match server {\n            McpServer::Stdio(_) =\u003e caps.stdio,\n            McpServer::Sse(_) =\u003e caps.sse,\n            McpServer::Http(_) =\u003e caps.http,\n        }\n    }\n}\n```\n\n## Acceptance Criteria\n- [ ] Capabilities accurately reflect each harness's features\n- [ ] supports_mcp_server() helper works correctly\n- [ ] Doc comments explain each capability","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:35:25.546606Z","updated_at":"2025-12-26T13:03:04.278753Z","closed_at":"2025-12-26T13:03:04.278753Z","close_reason":"All 3 phases complete: McpCapabilities struct, Harness methods, exports and tests.","dependencies":[{"issue_id":"get-harness-6m7","depends_on_id":"get-harness-vvg","type":"blocks","created_at":"2025-12-26T09:40:31.370192Z","created_by":"daemon"}]}
{"id":"get-harness-6m7.1","title":"Define McpCapabilities struct","description":"## Context\nPhase 1 of McpCapabilities implementation. Adds the struct to src/mcp.rs.\n\n## Key Changes\n- `src/mcp.rs` - Add import for HarnessKind\n- `src/mcp.rs` - Add McpCapabilities struct after OAuthConfig (~line 203)\n\n## Implementation Details\n\n```rust\n#[derive(Debug, Clone, Copy, PartialEq, Eq, Default, Serialize)]\n#[non_exhaustive]\npub struct McpCapabilities {\n    pub stdio: bool,\n    pub sse: bool,\n    pub http: bool,\n    pub oauth: bool,\n    pub timeout: bool,\n    pub toggle: bool,\n    pub headers: bool,\n    pub cwd: bool,\n}\n\nimpl McpCapabilities {\n    #[must_use]\n    pub fn for_kind(kind: HarnessKind) -\u003e Self { ... }\n}\n```\n\n## Capability Values per Harness\n| Field | ClaudeCode | OpenCode | Goose |\n|-------|------------|----------|-------|\n| stdio | true | true | true |\n| sse | true | false | true |\n| http | true | true | true |\n| oauth | false | true | false |\n| timeout | false | true | true |\n| toggle | false | true | true |\n| headers | true | true | true |\n| cwd | false | false | false |\n\n## Success Criteria\n- [ ] `cargo check` passes\n- [ ] `cargo clippy --all-targets -- -D warnings` passes\n- [ ] Struct has doc comments with examples\n\n## References\n- Full plan: `.beads/artifacts/get-harness-6m7/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T12:19:28.841279Z","updated_at":"2025-12-26T12:25:52.147562Z","closed_at":"2025-12-26T12:25:52.147562Z","close_reason":"Phase 1 complete: McpCapabilities struct added with for_kind() constructor. Verified: cargo check/clippy/doc/test all pass.","dependencies":[{"issue_id":"get-harness-6m7.1","depends_on_id":"get-harness-6m7","type":"parent-child","created_at":"2025-12-26T12:19:28.843258Z","created_by":"daemon"}]}
{"id":"get-harness-6m7.2","title":"Add Harness mcp_capabilities and supports_mcp_server methods","description":"## Context\nPhase 2 of McpCapabilities implementation. Adds methods to impl Harness.\n\n## Key Changes\n- `src/harness/mod.rs` - Add import: `use crate::mcp::{McpCapabilities, McpServer};`\n- `src/harness/mod.rs` - Add `mcp_capabilities()` method after `mcp()` (~line 244)\n- `src/harness/mod.rs` - Add `supports_mcp_server()` method\n\n## mcp_capabilities Method\n```rust\n#[must_use]\npub fn mcp_capabilities(\u0026self) -\u003e McpCapabilities {\n    McpCapabilities::for_kind(self.kind)\n}\n```\n\n## supports_mcp_server Method (Field-Aware)\nValidates transport type AND config field usage:\n- Stdio: if `cwd.is_some()` → require `caps.cwd`; if `timeout_ms.is_some()` → require `caps.timeout`\n- Sse: if `!headers.is_empty()` → require `caps.headers`; if `timeout_ms.is_some()` → require `caps.timeout`\n- Http: if `!headers.is_empty()` → require `caps.headers`; if `oauth.is_some()` → require `caps.oauth`; if `timeout_ms.is_some()` → require `caps.timeout`\n\n## Success Criteria\n- [ ] `cargo check` passes\n- [ ] `cargo clippy --all-targets -- -D warnings` passes\n- [ ] Doc examples compile\n\n## References\n- Full plan: `.beads/artifacts/get-harness-6m7/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T12:19:38.303917Z","updated_at":"2025-12-26T12:37:32.93725Z","closed_at":"2025-12-26T12:37:32.93725Z","close_reason":"Phase 2 complete: mcp_capabilities() and supports_mcp_server() methods added. All tests passing.","dependencies":[{"issue_id":"get-harness-6m7.2","depends_on_id":"get-harness-6m7","type":"parent-child","created_at":"2025-12-26T12:19:38.305794Z","created_by":"daemon"}]}
{"id":"get-harness-6m7.3","title":"Export McpCapabilities and add tests","description":"## Context\nPhase 3 of McpCapabilities implementation. Export from lib.rs and add comprehensive tests.\n\n## Key Changes\n- `src/lib.rs` line 14 - Add McpCapabilities to pub use mcp::...\n- `src/mcp.rs` tests - Add 5 tests for McpCapabilities\n- `src/harness/mod.rs` tests - Add 5 tests for Harness methods\n\n## Tests to Add in mcp.rs\n1. `mcp_capabilities_for_claude_code` - verify all 8 fields\n2. `mcp_capabilities_for_opencode` - verify all 8 fields\n3. `mcp_capabilities_for_goose` - verify all 8 fields\n4. `mcp_capabilities_serialization` - JSON contains expected fields\n5. `mcp_capabilities_default_is_all_false` - Default trait\n\n## Tests to Add in harness/mod.rs\n1. `mcp_capabilities_returns_correct_for_each_harness`\n2. `supports_mcp_server_stdio_basic` - all harnesses support basic stdio\n3. `supports_mcp_server_stdio_with_timeout_rejected_by_claude`\n4. `supports_mcp_server_http_with_oauth_rejected_by_claude`\n5. `supports_mcp_server_sse_rejected_by_opencode`\n\n## Success Criteria\n- [ ] `cargo build` passes\n- [ ] `cargo test` passes (all 10 new tests)\n- [ ] `cargo clippy --all-targets -- -D warnings` passes\n- [ ] `cargo doc --open` shows McpCapabilities in crate root\n\n## References\n- Full plan: `.beads/artifacts/get-harness-6m7/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T12:19:48.580047Z","updated_at":"2025-12-26T13:01:57.416408Z","closed_at":"2025-12-26T13:01:57.416408Z","close_reason":"Phase 3 complete: McpCapabilities exported, 10 tests added. Build/test/clippy all pass.","dependencies":[{"issue_id":"get-harness-6m7.3","depends_on_id":"get-harness-6m7","type":"parent-child","created_at":"2025-12-26T12:19:48.582002Z","created_by":"daemon"}]}
{"id":"get-harness-6or","title":"Define EnvValue type for environment variable handling","description":"Define the EnvValue type that handles environment variable references with harness-specific syntax.\n\n## Problem\nDifferent harnesses use different syntax for env var references:\n- Claude Code: \\${VAR}\n- OpenCode: {env:VAR}\n- Goose: Uses env_keys array, plain values\n\n## EnvValue Type\n\n```rust\n#[derive(Debug, Clone, Serialize, Deserialize, PartialEq, Eq)]\n#[serde(untagged)]\npub enum EnvValue {\n    /// Plain string value\n    Plain(String),\n    /// Reference to environment variable\n    EnvRef { env: String },\n}\n\nimpl EnvValue {\n    /// Create a plain string value\n    pub fn plain(s: impl Into\u003cString\u003e) -\u003e Self {\n        Self::Plain(s.into())\n    }\n    \n    /// Create an environment variable reference\n    pub fn env(var: impl Into\u003cString\u003e) -\u003e Self {\n        Self::EnvRef { env: var.into() }\n    }\n    \n    /// Convert to harness-specific string format\n    pub fn to_native(\u0026self, kind: HarnessKind) -\u003e String {\n        match (self, kind) {\n            (Self::Plain(s), _) =\u003e s.clone(),\n            (Self::EnvRef { env }, HarnessKind::ClaudeCode) =\u003e format!(\"\\${{{}}}}\", env),\n            (Self::EnvRef { env }, HarnessKind::OpenCode) =\u003e format!(\"{{env:{}}}\", env),\n            (Self::EnvRef { env }, HarnessKind::Goose) =\u003e {\n                // Goose resolves at runtime, return empty or resolved\n                std::env::var(env).unwrap_or_default()\n            }\n        }\n    }\n    \n    /// Parse from harness-specific string format\n    pub fn from_native(s: \u0026str, kind: HarnessKind) -\u003e Self {\n        // Parse \\${VAR} or {env:VAR} patterns\n        // Return Plain if no pattern matched\n    }\n    \n    /// Resolve the value, looking up env vars if needed\n    pub fn resolve(\u0026self) -\u003e Option\u003cString\u003e {\n        match self {\n            Self::Plain(s) =\u003e Some(s.clone()),\n            Self::EnvRef { env } =\u003e std::env::var(env).ok(),\n        }\n    }\n}\n```\n\n## Usage Example\n\n```rust\nlet api_key = EnvValue::env(\"MY_API_KEY\");\nlet native = api_key.to_native(HarnessKind::ClaudeCode);\n// Returns: \"\\${MY_API_KEY}\"\n\nlet native = api_key.to_native(HarnessKind::OpenCode);\n// Returns: \"{env:MY_API_KEY}\"\n```\n\n## Acceptance Criteria\n- [ ] Supports plain strings and env references\n- [ ] Converts to all three harness formats\n- [ ] Parses from all three harness formats\n- [ ] Serde untagged works correctly\n- [ ] Unit tests for all conversions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T09:35:05.326851Z","updated_at":"2025-12-26T10:41:21.99846Z","closed_at":"2025-12-26T10:41:21.99846Z","close_reason":"EnvValue type implemented with full test coverage","dependencies":[{"issue_id":"get-harness-6or","depends_on_id":"get-harness-p4w","type":"blocks","created_at":"2025-12-26T09:40:31.21113Z","created_by":"daemon"}]}
{"id":"get-harness-74k","title":"Add McpCapabilities for AmpCode","description":"Update src/mcp.rs to add MCP capabilities for AmpCode.\n\n## Changes Required\n\nAdd `HarnessKind::AmpCode` match arm to `McpCapabilities::for_kind()`:\n\n```rust\nHarnessKind::AmpCode =\u003e McpCapabilities {\n    stdio: true,\n    sse: true,      // AMP auto-detects SSE vs HTTP based on response\n    http: true,\n    oauth: true,    // Built-in OAuth flow for remote MCP servers\n    timeout: true,  // amp.tools.stopTimeout setting\n    toggle: true,   // amp.tools.disable setting  \n    headers: true,  // Supported for remote servers\n    cwd: false,     // Not documented for AMP\n},\n```\n\n## Acceptance Criteria\n- [ ] McpCapabilities::for_kind() handles AmpCode\n- [ ] Capability flags accurately reflect AMP's features\n- [ ] Existing tests still pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T18:00:53.628138Z","updated_at":"2025-12-28T19:18:59.370737Z","closed_at":"2025-12-28T19:18:59.370737Z","close_reason":"Completed: McpCapabilities added in mcp.rs","dependencies":[{"issue_id":"get-harness-74k","depends_on_id":"get-harness-zh0","type":"blocks","created_at":"2025-12-28T18:01:52.917024Z","created_by":"d0"}]}
{"id":"get-harness-7mp","title":"Epic: API Refactor for Multi-Harness Resource Management","description":"Complete API refactor to properly support MCP, skills, commands, plugins, and rules across Claude Code, OpenCode, and Goose harnesses.\n\n## Goals\n- Distinguish between directory-based resources (skills, commands, plugins) and config-embedded resources (MCP)\n- Provide normalized types with harness-specific converters\n- Support environment variable references with harness-specific syntax\n- Capture structural differences (e.g., skill vs skills, singular vs nested directories)\n- Include exists field for installation checking\n\n## Key Design Decisions\n- Use Result\u003cOption\u003cResource\u003e\u003e pattern: Err=system error, None=unsupported, Some=supported\n- Enum + Match wrapper for Harness (Option 1 with enhancements)\n- Normalized MCP types with to_native/from_native converters\n- EnvValue type for  vs {env:VAR} syntax differences\n\n## Harnesses\n- Claude Code: ~/.claude/, .claude/\n- OpenCode: ~/.config/opencode/, .opencode/\n- Goose: ~/.config/goose/, .goose/\n\n## Research Completed\n- MCP schemas verified for all harnesses\n- Skills paths verified (skill vs skills, nested structure)\n- Plugins vs MCP distinction clarified for OpenCode","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-26T09:33:48.868112Z","updated_at":"2025-12-26T18:41:15.280838Z","closed_at":"2025-12-26T18:41:15.280838Z","close_reason":"Implementation complete: all goals achieved (Result\u003cOption\u003cResource\u003e\u003e pattern, normalized MCP types, EnvValue, converters, exists field). Research errors fixed in get-harness-84c."}
{"id":"get-harness-7y4","title":"[Migration] Verify workspace builds and tests pass","description":"Run: cargo build --workspace \u0026\u0026 cargo test --workspace \u0026\u0026 cargo clippy --workspace. Ensure harness-locate API unchanged.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-01T14:41:23.525172Z","updated_at":"2026-01-01T14:41:23.525172Z","dependencies":[{"issue_id":"get-harness-7y4","depends_on_id":"get-harness-hcm","type":"blocks","created_at":"2026-01-01T14:41:44.141056Z","created_by":"daemon"},{"issue_id":"get-harness-7y4","depends_on_id":"get-harness-8cb","type":"blocks","created_at":"2026-01-01T14:41:44.224504Z","created_by":"daemon"}]}
{"id":"get-harness-84c","title":"Update HARNESS_SPEC.md with corrected paths","description":"Update HARNESS_SPEC.md to fix errors discovered during research.\n\n## Corrections Needed\n\n### OpenCode\n- MCP is NOT in plugin/ directory\n- MCP is in opencode.json under 'mcp' key\n- Plugin directory is for JS/TS plugins (different from MCP!)\n- Use singular 'skill' and 'command' not plurals\n\n### Claude Code\n- Add skills support (was missing)\n- Add global rules support (~/.claude/CLAUDE.md)\n\n### Goose\n- Add skills support (was missing)\n- Verify extensions key for MCP (not mcp_servers)\n\n## Files\n- HARNESS_SPEC.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:40:06.936941Z","updated_at":"2025-12-26T17:16:49.111894Z","closed_at":"2025-12-26T17:16:49.111894Z","close_reason":"Fixed spec and code bugs for MCP paths, rules_dir, and mcp_dir"}
{"id":"get-harness-8cb","title":"[Migration] Create farrier crate scaffold","description":"Create crates/farrier/ with Cargo.toml (depends on harness-locate.workspace, serde.workspace, thiserror.workspace, ureq=3, zip=2) and minimal src/lib.rs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-01T14:41:21.664301Z","updated_at":"2026-01-01T14:41:21.664301Z","dependencies":[{"issue_id":"get-harness-8cb","depends_on_id":"get-harness-dv6","type":"blocks","created_at":"2026-01-01T14:41:44.0582Z","created_by":"daemon"}]}
{"id":"get-harness-8v1","title":"Update documentation and tests for AmpCode","description":"Update documentation and add comprehensive tests for AmpCode support.\n\n## Documentation Updates\n\n1. Update README.md:\n   - Add AmpCode to supported harnesses table\n   - Add example usage for AmpCode\n   - Update feature matrix\n\n2. Update doc comments in lib.rs if needed\n\n## Test Coverage\n\n### Unit tests in amp_code.rs:\n- `test_global_config_dir`\n- `test_skills_dir_global`\n- `test_skills_dir_project`\n- `test_commands_dir_global`\n- `test_commands_dir_project`\n- `test_rules_dir_global`\n- `test_rules_dir_project`\n- `test_parse_mcp_server_stdio`\n- `test_parse_mcp_server_remote`\n- `test_parse_mcp_servers`\n\n### Integration tests in harness/mod.rs:\n- `test_locate_amp_code_when_installed`\n- `test_config_global_for_amp_code`\n- `test_skills_for_amp_code`\n- `test_commands_for_amp_code`\n- `test_mcp_for_amp_code`\n- `test_mcp_to_native_amp_code_stdio`\n- `test_mcp_to_native_amp_code_http`\n- `test_parse_mcp_config_amp_code`\n\n## Acceptance Criteria\n- [ ] README.md updated with AmpCode\n- [ ] All unit tests pass\n- [ ] All integration tests pass\n- [ ] `cargo test` passes\n- [ ] `cargo doc --no-deps` builds without warnings","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T18:01:23.37094Z","updated_at":"2025-12-28T19:19:38.230622Z","closed_at":"2025-12-28T19:19:38.230622Z","close_reason":"Completed: Tests in amp_code.rs, README updated","dependencies":[{"issue_id":"get-harness-8v1","depends_on_id":"get-harness-kv9","type":"blocks","created_at":"2025-12-28T18:02:08.490042Z","created_by":"d0"}]}
{"id":"get-harness-8xn","title":"[Farrier] Implement marketplace.json parser","description":"Parse marketplace.json format to extract plugin entries with sources.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T14:41:26.825141Z","updated_at":"2026-01-01T14:41:26.825141Z","dependencies":[{"issue_id":"get-harness-8xn","depends_on_id":"get-harness-8cb","type":"blocks","created_at":"2026-01-01T14:41:45.474486Z","created_by":"daemon"}]}
{"id":"get-harness-9j9","title":"Fix Claude Code MCP type inference from field presence","description":"Claude Code MCP parsing has same bug as AMP Code - unconditionally defaults to stdio when type field missing. Should infer from url vs command field presence. See claude_code.rs:218-219.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T19:35:00.560484Z","updated_at":"2025-12-29T19:48:27.98261Z","closed_at":"2025-12-29T19:48:27.98261Z","close_reason":"Fixed: MCP type inference now works from field presence"}
{"id":"get-harness-9ta","title":"Installation Status Type","description":"Define a richer installation status enum that distinguishes between 'has config', 'has binary', and 'fully installed'.\n\n## Deliverables\n- Define in `src/types.rs` or `src/detection.rs`:\n```rust\n#[derive(Debug, Clone, PartialEq, Eq)]\npub enum InstallationStatus {\n    NotInstalled,\n    ConfigOnly { config_path: PathBuf },\n    BinaryOnly { binary_path: PathBuf },\n    FullyInstalled { binary_path: PathBuf, config_path: PathBuf },\n}\n```\n- Add `InstallationStatus::is_usable(\u0026self) -\u003e bool` (true for BinaryOnly or FullyInstalled)\n- Add `Harness::installation_status(\u0026self) -\u003e InstallationStatus`\n- Keep existing `Harness::is_installed()` for backward compatibility\n\n## Acceptance Criteria\n- System with Claude CLI + config returns `FullyInstalled`\n- System with only `~/.claude/` dir returns `ConfigOnly`\n- System with neither returns `NotInstalled`\n- `is_installed()` returns same results as before (no breaking change)\n- Doc examples showing usage","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T07:19:52.04652Z","updated_at":"2025-12-27T08:50:08.024022Z","closed_at":"2025-12-27T08:50:08.024022Z","close_reason":"All phases complete - InstallationStatus enum implemented with tests","dependencies":[{"issue_id":"get-harness-9ta","depends_on_id":"get-harness-lf0","type":"blocks","created_at":"2025-12-27T07:21:07.892568Z","created_by":"daemon"}]}
{"id":"get-harness-9ta.1","title":"Add InstallationStatus enum to types.rs","description":"## Context\nPhase 1 of Installation Status Type feature. Define the enum with PathBuf fields and helper methods.\n\n## Key Changes\n- `src/types.rs` - Add InstallationStatus enum after Scope (~line 89)\n- 4 variants: NotInstalled, ConfigOnly{config_path}, BinaryOnly{binary_path}, FullyInstalled{both}\n- Add impl block with is_runnable(), binary_path(), config_path() methods\n\n## Patterns to Follow\n- See `Scope` enum at types.rs:83-89 for PathBuf variant pattern\n- Use #[derive(Debug, Clone, PartialEq, Eq)] and #[non_exhaustive]\n- Add #[must_use] on all methods\n\n## Success Criteria\n- [ ] cargo check passes\n- [ ] cargo clippy --all-targets -- -D warnings passes\n- [ ] Doc comments on enum, variants, and fields\n\n## References\n- Full plan: .beads/artifacts/get-harness-9ta/plan.md\n- Research: .beads/artifacts/get-harness-9ta/research.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T08:33:20.874536Z","updated_at":"2025-12-27T08:38:16.259384Z","closed_at":"2025-12-27T08:38:16.259384Z","close_reason":"Phase 1 complete: Added InstallationStatus enum with 4 variants and helper methods","dependencies":[{"issue_id":"get-harness-9ta.1","depends_on_id":"get-harness-9ta","type":"parent-child","created_at":"2025-12-27T08:33:20.876729Z","created_by":"daemon"}]}
{"id":"get-harness-9ta.2","title":"Add Harness::installation_status() method","description":"## Context\nPhase 2 of Installation Status Type feature. Add method to Harness that combines binary + config detection.\n\n## Key Changes\n- `src/harness/mod.rs` - Add installation_status() after is_installed() (~line 118)\n- Add find_first_binary() helper method\n- Import InstallationStatus from types\n\n## Patterns to Follow\n- See is_installed() at mod.rs:112-118 for dispatch pattern\n- Use match self.kind for harness-specific config paths\n- Return Result\u003cInstallationStatus\u003e (don't swallow errors)\n\n## Success Criteria\n- [ ] cargo check passes\n- [ ] cargo clippy --all-targets -- -D warnings passes\n- [ ] Doc comment includes # Errors section\n\n## References\n- Full plan: .beads/artifacts/get-harness-9ta/plan.md\n- Research: .beads/artifacts/get-harness-9ta/research.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T08:33:25.987874Z","updated_at":"2025-12-27T08:44:31.612965Z","closed_at":"2025-12-27T08:44:31.612965Z","close_reason":"Phase 2 complete: Added installation_status() method and find_first_binary() helper to Harness","dependencies":[{"issue_id":"get-harness-9ta.2","depends_on_id":"get-harness-9ta","type":"parent-child","created_at":"2025-12-27T08:33:25.996919Z","created_by":"daemon"}]}
{"id":"get-harness-9ta.3","title":"Export InstallationStatus and add tests","description":"## Context\nPhase 3 of Installation Status Type feature. Export from lib.rs and add unit tests.\n\n## Key Changes\n- `src/lib.rs` - Add InstallationStatus to pub use types::{...}\n- `src/types.rs` - Add tests in mod tests section\n\n## Tests to Write\n- installation_status_is_runnable - test all 4 variants\n- installation_status_accessors - test binary_path() and config_path()\n\n## Success Criteria\n- [ ] cargo build passes\n- [ ] cargo test passes\n- [ ] cargo clippy --all-targets -- -D warnings passes\n- [ ] cargo fmt --check passes\n\n## References\n- Full plan: .beads/artifacts/get-harness-9ta/plan.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T08:33:29.872918Z","updated_at":"2025-12-27T08:48:19.998119Z","closed_at":"2025-12-27T08:48:19.998119Z","close_reason":"Phase 3 complete: Exported InstallationStatus and added unit tests","dependencies":[{"issue_id":"get-harness-9ta.3","depends_on_id":"get-harness-9ta","type":"parent-child","created_at":"2025-12-27T08:33:29.877902Z","created_by":"daemon"}]}
{"id":"get-harness-bhv","title":"Cross-platform harness path discovery for CLI tools","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-26T07:27:08.191598Z","updated_at":"2025-12-26T08:26:20.669033Z","closed_at":"2025-12-26T08:26:20.669033Z","close_reason":"All harnesses implemented: Claude Code, OpenCode, Goose"}
{"id":"get-harness-bhv.1","title":"Define core types and error handling","description":"Define HarnessKind, Scope, PathType enums and Error type with thiserror. Foundational types for all harness implementations.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-26T07:27:19.676235Z","updated_at":"2025-12-26T07:41:04.485069Z","closed_at":"2025-12-26T07:41:04.485069Z","close_reason":"Phase 1 complete - core types and error handling implemented, tests passing","dependencies":[{"issue_id":"get-harness-bhv.1","depends_on_id":"get-harness-bhv","type":"parent-child","created_at":"2025-12-26T07:27:19.678115Z","created_by":"daemon"}]}
{"id":"get-harness-bhv.2","title":"Implement platform-specific path resolution","description":"Platform-specific path resolution using cfg attributes. Support macOS, Linux, Windows with XDG compliance.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-26T07:27:23.463777Z","updated_at":"2025-12-26T08:10:34.262194Z","closed_at":"2025-12-26T08:10:34.262194Z","close_reason":"Implemented platform-specific path resolution with macOS, Linux (XDG), and Windows support. All tests pass.","dependencies":[{"issue_id":"get-harness-bhv.2","depends_on_id":"get-harness-bhv","type":"parent-child","created_at":"2025-12-26T07:27:23.465648Z","created_by":"daemon"}]}
{"id":"get-harness-bhv.3","title":"Implement Claude Code harness","description":"Claude Code harness: ~/.claude/, CLAUDE_CONFIG_DIR env var, skills/commands/mcp paths.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T07:27:28.215099Z","updated_at":"2025-12-26T08:18:32.30642Z","closed_at":"2025-12-26T08:18:32.30642Z","close_reason":"Implemented Claude Code harness with global/project config, commands, MCP paths. 16 tests passing.","dependencies":[{"issue_id":"get-harness-bhv.3","depends_on_id":"get-harness-bhv","type":"parent-child","created_at":"2025-12-26T07:27:28.2169Z","created_by":"daemon"}]}
{"id":"get-harness-bhv.4","title":"Implement OpenCode harness","description":"OpenCode harness: ~/.config/opencode/, OPENCODE_CONFIG_DIR env var. Handle singular/plural path inconsistencies.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T07:27:31.795998Z","updated_at":"2025-12-26T08:25:08.448659Z","closed_at":"2025-12-26T08:25:08.448659Z","close_reason":"Implemented with full path resolution and tests","dependencies":[{"issue_id":"get-harness-bhv.4","depends_on_id":"get-harness-bhv","type":"parent-child","created_at":"2025-12-26T07:27:31.797424Z","created_by":"daemon"}]}
{"id":"get-harness-bhv.5","title":"Implement Goose harness","description":"Goose harness: platform-specific paths (Application Support on macOS), GOOSE_CONFIG_DIR env var. No skills dir (MCP in config).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T07:27:35.801885Z","updated_at":"2025-12-26T08:25:08.45022Z","closed_at":"2025-12-26T08:25:08.45022Z","close_reason":"Implemented with full path resolution and tests","dependencies":[{"issue_id":"get-harness-bhv.5","depends_on_id":"get-harness-bhv","type":"parent-child","created_at":"2025-12-26T07:27:35.803713Z","created_by":"daemon"}]}
{"id":"get-harness-bqr","title":"Implement MCP to_native converter for Claude Code","description":"Implement the mcp_to_native() converter for Claude Code harness.\n\n## IMPORTANT: Use McpCapabilities Validation\n\nBefore converting, validate with `supports_mcp_server()`:\n\n```rust\npub fn mcp_to_native(harness: \u0026Harness, name: \u0026str, server: \u0026McpServer) -\u003e Result\u003cserde_json::Value\u003e {\n    if !harness.supports_mcp_server(server) {\n        return Err(Error::UnsupportedMcpConfig {\n            harness: harness.kind().to_string(),\n            reason: \"Server uses unsupported features\".into(),\n        });\n    }\n    // ... conversion logic\n}\n```\n\nThis catches cases like:\n- HTTP server with OAuth (Claude doesn't support OAuth)\n- Server with timeout_ms (Claude doesn't support timeout)\n\n## Claude Code MCP Format\n\n### Stdio Server\n```json\n{\n  \"server-name\": {\n    \"command\": \"node\",\n    \"args\": [\"/path/to/server.js\"],\n    \"env\": {\n      \"API_KEY\": \"${MY_API_KEY}\"\n    }\n  }\n}\n```\n\n### SSE Server\n```json\n{\n  \"server-name\": {\n    \"type\": \"sse\",\n    \"url\": \"https://example.com/sse\"\n  }\n}\n```\n\n### HTTP Server\n```json\n{\n  \"server-name\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${TOKEN}\"\n    }\n  }\n}\n```\n\n## Key Differences\n- Stdio is default (no type field needed)\n- Uses ${VAR} for env var substitution\n- No enabled/disabled toggle\n- No timeout field\n- env not environment\n\n## Acceptance Criteria\n- [ ] Validates with supports_mcp_server() before converting\n- [ ] Returns Result\u003cValue, Error\u003e not just Value\n- [ ] Correctly converts all three transport types\n- [ ] Uses ${VAR} syntax for env values\n- [ ] Omits optional fields when empty\n- [ ] Unit tests cover validation failures","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:36:12.592908Z","updated_at":"2025-12-26T13:36:00.201378Z","closed_at":"2025-12-26T13:36:00.201378Z","close_reason":"Implemented mcp_to_native() converters","dependencies":[{"issue_id":"get-harness-bqr","depends_on_id":"get-harness-vvg","type":"blocks","created_at":"2025-12-26T09:40:34.25363Z","created_by":"daemon"}]}
{"id":"get-harness-bx0","title":"YAML Frontmatter Parser","description":"Implement a parser for Markdown files with YAML frontmatter (the `---` delimited header).\n\n## Deliverables\n- Add `serde_yaml` dependency to Cargo.toml\n- Create `src/skill.rs` module\n- Implement:\n```rust\n/// Parsed frontmatter result\npub struct Frontmatter\u003c'a\u003e {\n    pub yaml: Option\u003cserde_yaml::Value\u003e,\n    pub body: \u0026'a str,\n}\n\n/// Parse YAML frontmatter from markdown content\npub fn parse_frontmatter(content: \u0026str) -\u003e Result\u003cFrontmatter\u003c'_\u003e\u003e\n```\n- Handle cases:\n  - Standard format: `---\\nkey: value\\n---\\nbody`\n  - No frontmatter: return `yaml: None`, full content as body\n  - Empty frontmatter: `---\\n---\\n` returns `yaml: Some(Null)`\n  - Malformed YAML: return descriptive error\n- Export from `lib.rs`\n\n## Acceptance Criteria\n- Parses standard SKILL.md format correctly\n- Files without frontmatter parse successfully (yaml is None)\n- Invalid YAML returns `Error` with line number if possible\n- Frontmatter with trailing `---` followed by empty body works\n- Unit tests for all edge cases","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:20:05.761837Z","updated_at":"2025-12-27T09:23:33.679636Z","closed_at":"2025-12-27T09:23:33.679636Z","close_reason":"All phases complete - tests passing, coach approved"}
{"id":"get-harness-cbn","title":"Fix AmpCode MCP parsing to use literal dotted key amp.mcpServers","description":"parse_mcp_servers() fails because it looks for nested amp.mcpServers structure instead of literal dotted key","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-28T21:10:01.858196Z","updated_at":"2025-12-28T21:37:16.104779Z","closed_at":"2025-12-28T21:37:16.104779Z","close_reason":"Fixed AmpCode MCP parsing - all tests pass"}
{"id":"get-harness-ci1","title":"Add API documentation and examples","description":"Add comprehensive API documentation with examples.\n\n## Sections Needed\n- Getting Started (Installation, Basic usage, Detecting harness)\n- Resource Types (DirectoryResource, ConfigResource examples)\n- MCP (Normalized types, Converting to/from native formats)\n- Per-Resource Documentation\n\n## Files\n- README.md (update)\n- src/lib.rs (doc comments)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-26T09:40:10.644546Z","updated_at":"2025-12-26T20:46:57.067952Z","closed_at":"2025-12-26T20:46:57.067952Z","close_reason":"All 4 phases complete - API documentation done"}
{"id":"get-harness-ci1.1","title":"API Cleanup - Internalize parse_mcp functions","description":"## Context\nFirst phase of documentation work. Clean up API surface before writing docs by internalizing accidentally-public functions.\n\n## Key Changes\n- `src/harness/claude_code.rs` - Change `pub fn parse_mcp_server` and `pub fn parse_mcp_servers` to `pub(crate)`\n- `src/harness/opencode.rs` - Change `pub fn parse_mcp_server` and `pub fn parse_mcp_servers` to `pub(crate)`\n- `src/harness/goose.rs` - Change `pub fn parse_mcp_server` and `pub fn parse_mcp_servers` to `pub(crate)`\n\n## Why\nThese functions were never re-exported from lib.rs or documented. Making them pub(crate) prevents accidental API commitments.\n\n## Success Criteria\n- [ ] Build passes: `cargo build`\n- [ ] Tests pass: `cargo test`\n- [ ] Functions don't appear in `cargo doc` public API\n\n## References\n- Full plan: `.beads/artifacts/get-harness-ci1/plan.md`","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-26T20:28:16.529729Z","updated_at":"2025-12-26T20:35:59.066164Z","closed_at":"2025-12-26T20:35:59.066164Z","close_reason":"Phase 1 complete - API cleanup done, tests passing","dependencies":[{"issue_id":"get-harness-ci1.1","depends_on_id":"get-harness-ci1","type":"parent-child","created_at":"2025-12-26T20:28:16.531748Z","created_by":"daemon"}]}
{"id":"get-harness-ci1.2","title":"Create README.md documentation","description":"## Context\nCreate comprehensive README.md as the canonical documentation entry point for GitHub users.\n\n## Key Changes\n- `README.md` (new file) - Installation, quickstart, feature highlights, harness capability table\n\n## Structure\n1. Header with crate description\n2. Features list (4 bullet points)\n3. Installation (cargo add)\n4. Quick Start with 3 examples:\n   - Detect installed harnesses\n   - Get configuration paths\n   - MCP server configuration\n5. Supported Harnesses table\n6. Resource Types section\n7. License\n\n## Patterns to Follow\n- Use `no_run` for examples requiring installed harness\n- Use regular code blocks for pure struct construction\n- See plan.md for exact README content\n\n## Success Criteria\n- [ ] File exists at `README.md`\n- [ ] Markdown renders correctly\n- [ ] Examples are accurate to API\n\n## References\n- Full plan: `.beads/artifacts/get-harness-ci1/plan.md`","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-26T20:28:21.052368Z","updated_at":"2025-12-26T20:39:04.149089Z","closed_at":"2025-12-26T20:39:04.149089Z","close_reason":"Phase 2 complete - README.md created with installation, quickstart, harness table","dependencies":[{"issue_id":"get-harness-ci1.2","depends_on_id":"get-harness-ci1","type":"parent-child","created_at":"2025-12-26T20:28:21.061375Z","created_by":"daemon"}]}
{"id":"get-harness-ci1.3","title":"Update lib.rs to include README","description":"## Context\nInclude README.md in lib.rs crate docs so docs.rs/crates.io shows the same content as GitHub.\n\n## Key Changes\n- `src/lib.rs` - Replace crate-level docs with include directive + module overview\n\n## Specific Changes\nReplace lines 1-4 with:\n```rust\n#![doc = include_str!(\"../README.md\")]\n//!\n//! ## Modules\n//!\n//! - [`harness`] - Harness discovery and path resolution\n//! - [`mcp`] - MCP server type definitions\n//! - [`types`] - Core type definitions\n//! - [`error`] - Error types\n```\n\n## Success Criteria\n- [ ] Build passes: `cargo build`\n- [ ] Doc build passes: `cargo doc --no-deps`\n- [ ] `cargo doc --open` shows README content\n\n## References\n- Full plan: `.beads/artifacts/get-harness-ci1/plan.md`","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-26T20:28:24.982684Z","updated_at":"2025-12-26T20:41:11.020706Z","closed_at":"2025-12-26T20:41:11.020706Z","close_reason":"Phase 3 complete - lib.rs now includes README, docs.rs rendering ready","dependencies":[{"issue_id":"get-harness-ci1.3","depends_on_id":"get-harness-ci1","type":"parent-child","created_at":"2025-12-26T20:28:24.988493Z","created_by":"daemon"}]}
{"id":"get-harness-ci1.4","title":"Add examples to Harness methods","description":"## Context\nAdd `# Examples` sections to 12 Harness methods that currently lack them.\n\n## Key Changes\n- `src/harness/mod.rs` - Add examples to: locate, new, kind, is_installed, installed, skills, commands, plugins, agents, config, mcp, rules\n\n## Patterns to Follow\n- See `EnvValue` in `src/types.rs:175-379` for gold standard\n- Use `no_run` for harness-dependent examples (locate, installed, skills, commands, plugins, agents, config, mcp, rules)\n- Use regular examples for pure functions (new, kind, is_installed)\n- Include `# Ok::\u003c(), get_harness::Error\u003e(())` for `?` operator in doc tests\n\n## Example Template\n```rust\n/// # Examples\n///\n/// ```no_run\n/// use get_harness::{Harness, HarnessKind, Scope};\n///\n/// let harness = Harness::new(HarnessKind::ClaudeCode);\n/// // ... example code\n/// # Ok::\u003c(), get_harness::Error\u003e(())\n/// ```\n```\n\n## Success Criteria\n- [ ] All 12 methods have `# Examples`\n- [ ] Doc tests pass: `cargo test --doc`\n- [ ] Examples appear in `cargo doc`\n\n## References\n- Full plan: `.beads/artifacts/get-harness-ci1/plan.md` (has exact examples for each method)\n- Existing examples: `src/harness/mod.rs:265-312`","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-26T20:28:30.296184Z","updated_at":"2025-12-26T20:46:55.985364Z","closed_at":"2025-12-26T20:46:55.985364Z","close_reason":"Phase 4 complete - added examples to 12 Harness methods","dependencies":[{"issue_id":"get-harness-ci1.4","depends_on_id":"get-harness-ci1","type":"parent-child","created_at":"2025-12-26T20:28:30.300853Z","created_by":"daemon"}]}
{"id":"get-harness-cs4","title":"Epic: Skill Format Parsing","description":"Parse SKILL.md files with YAML frontmatter into typed structures. Provides Skill type definition and round-trip serialization support.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-27T07:19:29.727424Z","updated_at":"2025-12-27T15:53:07.297545Z","closed_at":"2025-12-27T15:53:07.297545Z","close_reason":"All sub-tasks complete. Skill parsing fully implemented with parse_frontmatter, parse_skill, and round-trip serialization.","dependencies":[{"issue_id":"get-harness-cs4","depends_on_id":"get-harness-bx0","type":"blocks","created_at":"2025-12-27T07:21:24.395393Z","created_by":"daemon"},{"issue_id":"get-harness-cs4","depends_on_id":"get-harness-r3z","type":"blocks","created_at":"2025-12-27T07:21:24.482719Z","created_by":"daemon"}]}
{"id":"get-harness-d6a","title":"Refactor resource methods to return structured types","description":"## Context\nPhase 2 of Harness API refactor. Changes all *_path() methods to return Result\u003cOption\u003cDirectoryResource|ConfigResource\u003e\u003e.\n\n## Key Changes\n- `src/harness/mod.rs` - Rename `skills_path()` -\u003e `skills()`, return `Result\u003cOption\u003cDirectoryResource\u003e\u003e`\n- `src/harness/mod.rs` - Rename `commands_path()` -\u003e `commands()`, return `Result\u003cOption\u003cDirectoryResource\u003e\u003e`\n- `src/harness/mod.rs` - Rename `config_path()` -\u003e `config()`, return `Result\u003cPathBuf\u003e`\n- `src/harness/mod.rs` - Rename `mcp_path()` -\u003e `mcp()`, return `Result\u003cOption\u003cConfigResource\u003e\u003e`\n- `src/harness/mod.rs` - Rename `rules_path()` -\u003e `rules()`, return `Result\u003cOption\u003cDirectoryResource\u003e\u003e`\n- `src/harness/mod.rs` - Add `plugins()` -\u003e `Result\u003cOption\u003cDirectoryResource\u003e\u003e` (OpenCode only)\n- `src/harness/mod.rs` - Add `agents()` -\u003e `Result\u003cOption\u003cDirectoryResource\u003e\u003e` (OpenCode only)\n\n## Error Handling Pattern\n- `Err(...)` = system error (can't find home dir)\n- `Ok(None)` = feature not supported by this harness\n- `Ok(Some(resource))` = supported, check `resource.exists`\n\n## Patterns to Follow\n- Take `scope: \u0026Scope` (by reference)\n- Use `DirectoryStructure::Flat` for commands, `Nested` for skills\n- Goose commands returns `Ok(None)` - no dedicated commands dir\n\n## Success Criteria\n- [ ] All *_path() methods renamed and refactored\n- [ ] `plugins()` and `agents()` added\n- [ ] `cargo build` passes\n- [ ] `cargo clippy --all-targets -- -D warnings` clean\n\n## References\n- Full plan: `.beads/artifacts/get-harness-gye/plan.md` (Phase 2 section)\n- DirectoryResource: `src/types.rs:127-137`\n- ConfigResource: `src/types.rs:143-155`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T11:17:46.100156Z","updated_at":"2025-12-26T11:50:13.052616Z","closed_at":"2025-12-26T11:50:13.052616Z","close_reason":"All Phase 2 requirements implemented: skills, commands, config, mcp, rules refactored to return Result\u003cOption\u003cResource\u003e\u003e; plugins() and agents() added. Build/clippy/tests all pass.","dependencies":[{"issue_id":"get-harness-d6a","depends_on_id":"get-harness-0ta","type":"blocks","created_at":"2025-12-26T11:17:59.723078Z","created_by":"daemon"}]}
{"id":"get-harness-dcs","title":"Harness Compatibility Validation","description":"Validate MCP server configurations against specific harness capabilities, catching incompatibilities before runtime errors.\n\n## Deliverables\n- Add to `src/validation.rs`:\n```rust\n/// Validate server config against harness capabilities\npub fn validate_for_harness(server: \u0026McpServer, kind: HarnessKind) -\u003e Vec\u003cValidationIssue\u003e\n```\n- Add to `Harness` impl:\n```rust\n/// Validate an MCP server config for this harness\npub fn validate_mcp_server(\u0026self, server: \u0026McpServer) -\u003e Vec\u003cValidationIssue\u003e\n```\n- Harness-specific checks using `McpCapabilities`:\n  - OAuth used but `caps.oauth == false` → Error\n  - Headers used but `caps.headers == false` → Error\n  - Toggle (enabled field) used but `caps.toggle == false` → Warning\n  - CWD used but `caps.cwd == false` → Error\n  - SSE transport → Warning for Claude Code (prefer HTTP)\n- Combine with base validation (call `validate_mcp_server` internally)\n\n## Acceptance Criteria\n- OAuth config on non-supporting harness returns Error\n- Unsupported features clearly identified in message\n- Base validation issues included in results\n- `Harness::validate_mcp_server()` is convenient one-liner\n- Doc examples showing validation workflow","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:20:42.835532Z","updated_at":"2025-12-27T11:01:47.937064Z","closed_at":"2025-12-27T11:01:47.937064Z","close_reason":"Implemented harness-specific validation - tests passing","dependencies":[{"issue_id":"get-harness-dcs","depends_on_id":"get-harness-qu7","type":"blocks","created_at":"2025-12-27T07:21:13.400256Z","created_by":"daemon"}]}
{"id":"get-harness-di1","title":"[Farrier] Implement plugin.json manifest parser","description":"Parse plugin.json manifest format for skill metadata.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T14:41:28.083992Z","updated_at":"2026-01-01T14:41:28.083992Z","dependencies":[{"issue_id":"get-harness-di1","depends_on_id":"get-harness-8cb","type":"blocks","created_at":"2026-01-01T14:41:45.558619Z","created_by":"daemon"}]}
{"id":"get-harness-dv6","title":"[Migration] Create root workspace Cargo.toml","description":"Create root Cargo.toml with [workspace] config: resolver=2, members=[crates/*], workspace.package (edition, license, repo), workspace.dependencies (serde, serde_json, serde_yaml, thiserror, home, which, url, harness-locate).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-01T14:41:17.598738Z","updated_at":"2026-01-01T14:49:56.477819Z","closed_at":"2026-01-01T14:49:56.477819Z","close_reason":"Completed: workspace Cargo.toml created, build+tests pass","dependencies":[{"issue_id":"get-harness-dv6","depends_on_id":"get-harness-3e3","type":"blocks","created_at":"2026-01-01T14:41:43.888936Z","created_by":"daemon"}]}
{"id":"get-harness-f5x","title":"Implement rules() for all harnesses","description":"Implement rules file resource for all harnesses.\n\n## Claude Code\n- Global: ~/.claude/CLAUDE.md\n- Project: CLAUDE.md (root) or .claude/CLAUDE.md\n\n## OpenCode\n- Global: ~/.config/opencode/AGENTS.md (verify exact name)\n- Project: AGENTS.md (root) or .opencode/AGENTS.md\n\n## Goose\n- Global: ~/.config/goose/instructions.md (verify)\n- Project: .goose/instructions.md\n\n## Files\n- src/harness/claude_code.rs\n- src/harness/opencode.rs\n- src/harness/goose.rs\n\n## Acceptance Criteria\n- [ ] Implement for Claude Code\n- [ ] Implement for OpenCode\n- [ ] Implement for Goose\n- [ ] Handle multiple possible locations\n- [ ] Unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:38:18.698605Z","updated_at":"2025-12-26T15:09:29.117842Z","closed_at":"2025-12-26T15:09:29.117842Z","close_reason":"Implementation verified against HARNESS_SPEC.md - all resource methods return correct values, tests pass","dependencies":[{"issue_id":"get-harness-f5x","depends_on_id":"get-harness-gye","type":"blocks","created_at":"2025-12-26T09:40:43.663944Z","created_by":"daemon"}]}
{"id":"get-harness-fgt","title":"[Farrier] Implement GitHub resolver","description":"Resolve owner/repo shorthand to raw GitHub URLs without requiring API key.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T14:41:29.488586Z","updated_at":"2026-01-01T14:41:29.488586Z","dependencies":[{"issue_id":"get-harness-fgt","depends_on_id":"get-harness-8cb","type":"blocks","created_at":"2026-01-01T14:41:45.637938Z","created_by":"daemon"}]}
{"id":"get-harness-frk","title":"Implement rules_path() for all harnesses","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T08:50:23.854033Z","updated_at":"2025-12-26T08:55:50.105862Z","closed_at":"2025-12-26T08:55:50.105862Z","close_reason":"Implemented rules_path and HARNESS_SPEC.md"}
{"id":"get-harness-g09","title":"Implement agents() for OpenCode","description":"Implement agents directory resource for OpenCode ONLY.\n\n## Paths\n- Global: ~/.config/opencode/agent/\n- Project: .opencode/agent/\n\n## Structure\nEach agent is a YAML/JSON file defining an agent profile.\n\n## API\n```rust\n// Only OpenCode has agents\nfn agents(\u0026self) -\u003e Option\u003cDirectoryResource\u003e {\n    Some(DirectoryResource {\n        global_path: Some(\"~/.config/opencode/agent\"),\n        project_path: Some(\".opencode/agent\"),\n        structure: DirectoryStructure::FlatFiles(\"*.{yaml,json}\"),\n    })\n}\n```\n\n## Files\n- src/harness/opencode.rs\n- src/harness/claude_code.rs (return None)\n- src/harness/goose.rs (return None)\n\n## Acceptance Criteria\n- [ ] Implement for OpenCode\n- [ ] Return None for Claude Code\n- [ ] Return None for Goose\n- [ ] Unit test","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:38:36.29894Z","updated_at":"2025-12-26T15:09:29.123578Z","closed_at":"2025-12-26T15:09:29.123578Z","close_reason":"Implementation verified against HARNESS_SPEC.md - all resource methods return correct values, tests pass","dependencies":[{"issue_id":"get-harness-g09","depends_on_id":"get-harness-gye","type":"blocks","created_at":"2025-12-26T09:40:43.844315Z","created_by":"daemon"}]}
{"id":"get-harness-gye","title":"Refactor Harness struct with enhanced API","description":"Refactor the Harness struct to use the new type system with enhanced methods.\n\n## Changes to HarnessKind\n\n```rust\npub enum HarnessKind {\n    ClaudeCode,\n    OpenCode,\n    Goose,\n}\n\nimpl HarnessKind {\n    /// All known harness types\n    pub const ALL: \u0026'static [HarnessKind] = \u0026[\n        HarnessKind::ClaudeCode,\n        HarnessKind::OpenCode,\n        HarnessKind::Goose,\n    ];\n}\n```\n\n## New Harness Struct\n\n```rust\npub struct Harness {\n    kind: HarnessKind,\n}\n\nimpl Harness {\n    pub fn new(kind: HarnessKind) -\u003e Self;\n    pub fn kind(\u0026self) -\u003e HarnessKind;\n    \n    /// Returns all harnesses installed on this system\n    pub fn installed() -\u003e Vec\u003cHarness\u003e;\n    \n    /// Check if this harness is installed\n    pub fn is_installed(\u0026self) -\u003e bool;\n    \n    // Resource methods - all return Result\u003cOption\u003c_\u003e\u003e\n    pub fn skills(\u0026self, scope: \u0026Scope) -\u003e Result\u003cOption\u003cDirectoryResource\u003e\u003e;\n    pub fn commands(\u0026self, scope: \u0026Scope) -\u003e Result\u003cOption\u003cDirectoryResource\u003e\u003e;\n    pub fn plugins(\u0026self, scope: \u0026Scope) -\u003e Result\u003cOption\u003cDirectoryResource\u003e\u003e;\n    pub fn mcp(\u0026self, scope: \u0026Scope) -\u003e Result\u003cOption\u003cConfigResource\u003e\u003e;\n    pub fn rules(\u0026self, scope: \u0026Scope) -\u003e Result\u003cOption\u003cDirectoryResource\u003e\u003e;\n    pub fn agents(\u0026self, scope: \u0026Scope) -\u003e Result\u003cOption\u003cDirectoryResource\u003e\u003e;\n    pub fn config(\u0026self, scope: \u0026Scope) -\u003e Result\u003cPathBuf\u003e;\n}\n```\n\n## Error Handling Pattern\n- Err(...) = system error (can't find home dir, etc.)\n- Ok(None) = feature not supported by this harness\n- Ok(Some(resource)) = supported, check resource.exists for presence\n\n## Acceptance Criteria\n- [ ] HarnessKind::ALL constant added\n- [ ] Harness::installed() method works\n- [ ] All resource methods return Result\u003cOption\u003c_\u003e\u003e\n- [ ] Existing tests updated or replaced","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T09:34:24.870898Z","updated_at":"2025-12-26T12:00:34.713894Z","closed_at":"2025-12-26T12:00:34.713894Z","close_reason":"All phases complete - HarnessKind::ALL added, all resource methods refactored to return Result\u003cOption\u003cResource\u003e\u003e, tests updated","dependencies":[{"issue_id":"get-harness-gye","depends_on_id":"get-harness-p4w","type":"blocks","created_at":"2025-12-26T09:40:31.452875Z","created_by":"daemon"},{"issue_id":"get-harness-gye","depends_on_id":"get-harness-vvg","type":"blocks","created_at":"2025-12-26T09:40:31.536285Z","created_by":"daemon"}]}
{"id":"get-harness-hcm","title":"[Migration] Update harness-locate Cargo.toml for workspace","description":"Update crates/harness-locate/Cargo.toml to use workspace inheritance: edition.workspace=true, license.workspace=true, repository.workspace=true, and deps.workspace=true for all shared deps.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-01T14:41:19.538105Z","updated_at":"2026-01-01T14:41:19.538105Z","dependencies":[{"issue_id":"get-harness-hcm","depends_on_id":"get-harness-dv6","type":"blocks","created_at":"2026-01-01T14:41:43.970536Z","created_by":"daemon"}]}
{"id":"get-harness-how","title":"Implement skills() for OpenCode","description":"Implement skills directory resource for OpenCode.\n\n## Paths (NOTE: singular 'skill' not 'skills')\n- Global: ~/.config/opencode/skill/\n- Project: .opencode/skill/\n\n## Structure\nEach skill is a directory containing SKILL.md:\n```\nskill/\n  my-skill/\n    SKILL.md\n```\n\n## API\n```rust\nfn skills(\u0026self) -\u003e DirectoryResource {\n    DirectoryResource {\n        global_path: Some(\"~/.config/opencode/skill\"),\n        project_path: Some(\".opencode/skill\"),\n        structure: DirectoryStructure::NestedWithMarker(\"SKILL.md\"),\n    }\n}\n```\n\n## CRITICAL\nOpenCode uses SINGULAR 'skill' directory name, not 'skills'!\n\n## Files\n- src/harness/opencode.rs\n\n## Acceptance Criteria\n- [ ] Return correct DirectoryResource with singular path\n- [ ] Unit test","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:37:53.539644Z","updated_at":"2025-12-26T15:09:29.107418Z","closed_at":"2025-12-26T15:09:29.107418Z","close_reason":"Implementation verified against HARNESS_SPEC.md - all resource methods return correct values, tests pass","dependencies":[{"issue_id":"get-harness-how","depends_on_id":"get-harness-gye","type":"blocks","created_at":"2025-12-26T09:40:40.589416Z","created_by":"daemon"}]}
{"id":"get-harness-ijh","title":"Implement commands() for all harnesses","description":"Implement commands directory resource for all harnesses.\n\n## Claude Code\n- Global: ~/.claude/commands/\n- Project: .claude/commands/\n- Structure: Markdown files (*.md)\n\n## OpenCode\n- Global: ~/.config/opencode/command/\n- Project: .opencode/command/\n- Structure: Markdown files (*.md)\n- NOTE: Singular 'command' not 'commands'\n\n## Goose\n- Global: ~/.config/goose/commands/ (verify)\n- Project: .goose/commands/ (verify)\n- Structure: TBD - verify from source\n\n## Files\n- src/harness/claude_code.rs\n- src/harness/opencode.rs\n- src/harness/goose.rs\n\n## Acceptance Criteria\n- [ ] Implement for Claude Code\n- [ ] Implement for OpenCode (singular path)\n- [ ] Implement for Goose (or return None if unsupported)\n- [ ] Unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:38:11.614166Z","updated_at":"2025-12-26T15:09:29.114494Z","closed_at":"2025-12-26T15:09:29.114494Z","close_reason":"Implementation verified against HARNESS_SPEC.md - all resource methods return correct values, tests pass","dependencies":[{"issue_id":"get-harness-ijh","depends_on_id":"get-harness-gye","type":"blocks","created_at":"2025-12-26T09:40:43.57527Z","created_by":"daemon"}]}
{"id":"get-harness-jho","title":"Epic: Binary Detection","description":"Add cross-platform binary detection to determine if harness binaries are installed and available in PATH. This provides richer installation status beyond just checking config directories.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T07:19:27.999173Z","updated_at":"2025-12-27T08:55:52.269152Z","closed_at":"2025-12-27T08:55:52.269152Z","close_reason":"All dependencies complete: binary detection (find_binary, binary_names) and installation status (InstallationStatus enum, installation_status method) implemented","dependencies":[{"issue_id":"get-harness-jho","depends_on_id":"get-harness-lf0","type":"blocks","created_at":"2025-12-27T07:21:21.195465Z","created_by":"daemon"},{"issue_id":"get-harness-jho","depends_on_id":"get-harness-9ta","type":"blocks","created_at":"2025-12-27T07:21:21.284259Z","created_by":"daemon"}]}
{"id":"get-harness-ku1","title":"Implement skills() for Goose","description":"Implement skills directory resource for Goose.\n\n## Paths\n- Global: ~/.config/goose/skills/\n- Project: .goose/skills/ (if supported)\n\n## Structure\nSkills are markdown files in the skills directory.\n\n## API\n```rust\nfn skills(\u0026self) -\u003e DirectoryResource {\n    DirectoryResource {\n        global_path: Some(\"~/.config/goose/skills\"),\n        project_path: None,  // Verify if project-level exists\n        structure: DirectoryStructure::FlatFiles(\"*.md\"),\n    }\n}\n```\n\n## Files\n- src/harness/goose.rs\n\n## Acceptance Criteria\n- [ ] Verify Goose skills structure from source\n- [ ] Return correct DirectoryResource\n- [ ] Unit test","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:37:59.138589Z","updated_at":"2025-12-26T15:09:29.11103Z","closed_at":"2025-12-26T15:09:29.11103Z","close_reason":"Implementation verified against HARNESS_SPEC.md - all resource methods return correct values, tests pass","dependencies":[{"issue_id":"get-harness-ku1","depends_on_id":"get-harness-gye","type":"blocks","created_at":"2025-12-26T09:40:40.663485Z","created_by":"daemon"}]}
{"id":"get-harness-kv9","title":"Integrate AmpCode into Harness struct","description":"Update src/harness/mod.rs to integrate AmpCode into all Harness methods.\n\n## Changes Required\n\n1. Add `pub mod amp_code;` to module declarations\n2. Update `Harness::locate()` - add `HarnessKind::AmpCode` match arm\n3. Update `Harness::is_installed()` - add match arm\n4. Update `Harness::installation_status()` - add match arm for config path\n5. Update `Harness::skills()` - return DirectoryResource for AmpCode\n6. Update `Harness::commands()` - return DirectoryResource for AmpCode\n7. Update `Harness::rules()` - return DirectoryResource for AmpCode\n8. Update `Harness::config()` - delegate to amp_code::config_dir\n9. Update `Harness::mcp()` - return ConfigResource pointing to settings.json with key path \"/amp.mcpServers\"\n10. Add `mcp_to_native_amp_code()` private method for MCP serialization\n11. Update `Harness::parse_mcp_config()` - add match arm\n12. Update `Harness::parse_mcp_server_config()` - add match arm\n\n## MCP Native Format for AmpCode\n\nStdio servers:\n```json\n{\"command\": \"node\", \"args\": [\"server.js\"], \"env\": {\"KEY\": \"${VAR}\"}}\n```\n\nRemote servers:\n```json\n{\"url\": \"https://...\", \"headers\": {\"Authorization\": \"token ${TOKEN}\"}}\n```\n\n## Acceptance Criteria\n- [ ] All match arms updated for HarnessKind::AmpCode\n- [ ] MCP serialization produces correct AMP format\n- [ ] Integration tests pass\n- [ ] `cargo clippy` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T18:00:48.024966Z","updated_at":"2025-12-28T19:18:39.725105Z","closed_at":"2025-12-28T19:18:39.725105Z","close_reason":"Completed: Added AmpCode match arms to mod.rs and mcp.rs","dependencies":[{"issue_id":"get-harness-kv9","depends_on_id":"get-harness-4n6","type":"blocks","created_at":"2025-12-28T18:01:42.53846Z","created_by":"d0"},{"issue_id":"get-harness-kv9","depends_on_id":"get-harness-zh0","type":"blocks","created_at":"2025-12-28T18:01:47.731167Z","created_by":"d0"}]}
{"id":"get-harness-l33","title":"Implement mcp_from_native parser for OpenCode","description":"Parse OpenCode's native MCP format from opencode.json mcp key into normalized McpServer types.\n\n## Input Format (OpenCode)\n```json\n{\n  \"mcp\": {\n    \"server-name\": {\n      \"type\": \"local\",\n      \"command\": [\"npx\", \"-y\", \"server\"],\n      \"environment\": { \"KEY\": \"value\" },\n      \"enabled\": true,\n      \"timeout\": 30000\n    }\n  }\n}\n```\n\n## Output\nVec\u003cMcpServer\u003e with normalized types\n\n## Files\n- src/harness/opencode.rs\n\n## Acceptance Criteria\n- [ ] Parse local servers (type: local, command as array)\n- [ ] Parse remote servers (type: remote, url)\n- [ ] Handle environment key (not env)\n- [ ] Handle {env:VAR} syntax\n- [ ] Handle oauth configuration\n- [ ] Handle timeout in milliseconds\n- [ ] Handle enabled flag (skip disabled servers)\n- [ ] Unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:37:31.877975Z","updated_at":"2025-12-26T13:52:33.695857Z","closed_at":"2025-12-26T13:52:33.695857Z","close_reason":"Implemented with coach-recommended fixes: error propagation in parse_mcp_servers, OAuth field validation","dependencies":[{"issue_id":"get-harness-l33","depends_on_id":"get-harness-vvg","type":"blocks","created_at":"2025-12-26T09:40:37.406761Z","created_by":"daemon"}]}
{"id":"get-harness-lds","title":"[Migration] Rename GitHub repo harness-locate → harness-barn","description":"AFTER local restructure verified: rename repo on GitHub, update repository URLs in workspace Cargo.toml.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-01T14:41:25.282087Z","updated_at":"2026-01-01T14:41:25.282087Z","dependencies":[{"issue_id":"get-harness-lds","depends_on_id":"get-harness-7y4","type":"blocks","created_at":"2026-01-01T14:41:44.311399Z","created_by":"daemon"}]}
{"id":"get-harness-lf0","title":"Binary Detection Infrastructure","description":"Add cross-platform binary detection using the `which` crate.\n\n## Deliverables\n- Add `which` crate dependency to Cargo.toml\n- Create `src/detection.rs` module\n- Implement `find_binary(name: \u0026str) -\u003e Option\u003cPathBuf\u003e`\n- Add `HarnessKind::binary_names(\u0026self) -\u003e \u0026'static [\u0026'static str]` returning known binary names:\n  - ClaudeCode: `[\"claude\"]`\n  - OpenCode: `[\"opencode\"]`\n  - Goose: `[\"goose\"]`\n- Export module from `lib.rs`\n\n## Acceptance Criteria\n- `find_binary(\"claude\")` returns `Some(path)` when Claude CLI is installed\n- `find_binary(\"nonexistent-binary-xyz\")` returns `None`\n- Works on macOS, Linux, Windows (handles `.exe` suffix automatically via `which` crate)\n- Unit tests for `binary_names()` method","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T07:19:45.129828Z","updated_at":"2025-12-27T08:08:26.574228Z","closed_at":"2025-12-27T08:08:26.574228Z","close_reason":"Binary detection infrastructure implemented: find_binary(), HarnessKind::binary_names(), Error::BinaryDetection"}
{"id":"get-harness-lf0.1","title":"Add which crate dependency","description":"## Context\nFirst phase of binary detection infrastructure. Adds the `which` crate for cross-platform PATH lookup.\n\n## Key Changes\n- `Cargo.toml` - Add `which = \"7\"` to dependencies\n\n## Success Criteria\n- [ ] `cargo check` passes\n\n## References\n- Full plan: `.beads/artifacts/get-harness-lf0/plan.md`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T07:59:10.197775Z","updated_at":"2025-12-27T08:08:20.374961Z","closed_at":"2025-12-27T08:08:20.374961Z","close_reason":"Implementation complete","dependencies":[{"issue_id":"get-harness-lf0.1","depends_on_id":"get-harness-lf0","type":"parent-child","created_at":"2025-12-27T07:59:10.198863Z","created_by":"daemon"}]}
{"id":"get-harness-lf0.2","title":"Add BinaryDetection error variant","description":"## Context\nAdd error variant for binary detection failures (canonicalization, system errors).\n\n## Key Changes\n- `src/error.rs` - Add `BinaryDetection(String)` variant after `UnsupportedMcpConfig`\n\n## Pattern to Follow\nSee `error.rs:29-36` for `UnsupportedMcpConfig` pattern\n\n## Success Criteria\n- [ ] `cargo check` passes\n\n## References\n- Full plan: `.beads/artifacts/get-harness-lf0/plan.md`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T07:59:13.033151Z","updated_at":"2025-12-27T08:08:20.37879Z","closed_at":"2025-12-27T08:08:20.37879Z","close_reason":"Implementation complete","dependencies":[{"issue_id":"get-harness-lf0.2","depends_on_id":"get-harness-lf0","type":"parent-child","created_at":"2025-12-27T07:59:13.038918Z","created_by":"daemon"}]}
{"id":"get-harness-lf0.3","title":"Create detection.rs with find_binary","description":"## Context\nCore implementation - create detection module with fallible find_binary function.\n\n## Key Changes\n- `src/detection.rs` (NEW) - Create module with `find_binary(name: \u0026str) -\u003e Result\u003cOption\u003cPathBuf\u003e\u003e`\n\n## Implementation\n```rust\npub fn find_binary(name: \u0026str) -\u003e Result\u003cOption\u003cPathBuf\u003e\u003e {\n    match which::which(name) {\n        Ok(path) =\u003e Ok(Some(path)),\n        Err(which::Error::CannotFindBinaryPath) =\u003e Ok(None),\n        Err(e) =\u003e Err(Error::BinaryDetection(e.to_string())),\n    }\n}\n```\n\n## Success Criteria\n- [ ] `cargo check` passes\n\n## References\n- Full plan: `.beads/artifacts/get-harness-lf0/plan.md`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T07:59:16.870328Z","updated_at":"2025-12-27T08:08:20.38184Z","closed_at":"2025-12-27T08:08:20.38184Z","close_reason":"Implementation complete","dependencies":[{"issue_id":"get-harness-lf0.3","depends_on_id":"get-harness-lf0","type":"parent-child","created_at":"2025-12-27T07:59:16.87489Z","created_by":"daemon"}]}
{"id":"get-harness-lf0.4","title":"Add HarnessKind::binary_names method","description":"## Context\nAdd method to HarnessKind returning known CLI binary names per harness.\n\n## Key Changes\n- `src/types.rs` - Add `binary_names(\u0026self) -\u003e \u0026'static [\u0026'static str]` in impl HarnessKind block\n\n## Pattern to Follow\nSee `types.rs:38-54` for existing `ALL` constant pattern\n\n## Implementation\n```rust\n#[must_use]\npub fn binary_names(\u0026self) -\u003e \u0026'static [\u0026'static str] {\n    match self {\n        Self::ClaudeCode =\u003e \u0026[\"claude\"],\n        Self::OpenCode =\u003e \u0026[\"opencode\"],\n        Self::Goose =\u003e \u0026[\"goose\"],\n    }\n}\n```\n\n## Success Criteria\n- [ ] `cargo check` passes\n- [ ] Doc tests pass\n\n## References\n- Full plan: `.beads/artifacts/get-harness-lf0/plan.md`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T07:59:21.024095Z","updated_at":"2025-12-27T08:08:20.384809Z","closed_at":"2025-12-27T08:08:20.384809Z","close_reason":"Implementation complete","dependencies":[{"issue_id":"get-harness-lf0.4","depends_on_id":"get-harness-lf0","type":"parent-child","created_at":"2025-12-27T07:59:21.028199Z","created_by":"daemon"}]}
{"id":"get-harness-lf0.5","title":"Export detection module and add tests","description":"## Context\nFinal phase - wire up exports in lib.rs and add unit tests.\n\n## Key Changes\n- `src/lib.rs` - Add `pub mod detection;` and `pub use detection::find_binary;`\n- `src/detection.rs` - Add test module with find_binary tests\n- `src/types.rs` - Add binary_names tests to existing test module\n\n## Tests to Add\n- find_binary_returns_none_for_nonexistent\n- find_binary_returns_some_for_common_binary\n- binary_names_claude_code\n- binary_names_opencode\n- binary_names_goose\n- binary_names_returns_static_slice\n\n## Success Criteria\n- [ ] `cargo build` passes\n- [ ] `cargo test` passes\n- [ ] `cargo clippy --all-targets -- -D warnings` clean\n- [ ] `cargo fmt --check` passes\n\n## References\n- Full plan: `.beads/artifacts/get-harness-lf0/plan.md`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T07:59:25.634482Z","updated_at":"2025-12-27T08:08:20.387417Z","closed_at":"2025-12-27T08:08:20.387417Z","close_reason":"Implementation complete","dependencies":[{"issue_id":"get-harness-lf0.5","depends_on_id":"get-harness-lf0","type":"parent-child","created_at":"2025-12-27T07:59:25.639319Z","created_by":"daemon"}]}
{"id":"get-harness-lid","title":"Implement mcp_from_native parser for Goose","description":"Parse Goose's native MCP format from config.yaml extensions key into normalized McpServer types.\n\n## Input Format (Goose)\n```yaml\nextensions:\n  server-name:\n    type: stdio\n    cmd: npx\n    args:\n      - -y\n      - server\n    envs:\n      KEY: value\n    timeout: 30\n```\n\n## Output\nVec\u003cMcpServer\u003e with normalized types\n\n## Files\n- src/harness/goose.rs\n\n## Acceptance Criteria\n- [ ] Parse stdio servers\n- [ ] Parse SSE servers (type: sse, uri)\n- [ ] Parse streamable_http servers\n- [ ] Handle envs key (not env)\n- [ ] Handle timeout in SECONDS (convert to ms internally)\n- [ ] Unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:37:34.615677Z","updated_at":"2025-12-26T13:52:33.776668Z","closed_at":"2025-12-26T13:52:33.776668Z","close_reason":"Implemented with coach-recommended fixes: proper error handling, checked overflow, strict type validation","dependencies":[{"issue_id":"get-harness-lid","depends_on_id":"get-harness-vvg","type":"blocks","created_at":"2025-12-26T09:40:37.485136Z","created_by":"daemon"}]}
{"id":"get-harness-nfd","title":"Implement MCP to_native converter for OpenCode","description":"Implement mcp_to_native() for OpenCode.\n\n## IMPORTANT: Use McpCapabilities Validation\n\nBefore converting, validate with `supports_mcp_server()`:\n\n```rust\npub fn mcp_to_native(harness: \u0026Harness, name: \u0026str, server: \u0026McpServer) -\u003e Result\u003cserde_json::Value\u003e {\n    if !harness.supports_mcp_server(server) {\n        return Err(Error::UnsupportedMcpConfig {\n            harness: harness.kind().to_string(),\n            reason: \"Server uses unsupported features\".into(),\n        });\n    }\n    // ... conversion logic\n}\n```\n\nThis catches cases like:\n- SSE server (OpenCode doesn't support SSE, uses remote type instead)\n\n## OpenCode MCP Format\n- Uses type: local/remote\n- command as array\n- environment not env\n- Supports enabled/timeout/oauth\n- Schema at https://opencode.ai/config.json\n\n## Acceptance Criteria\n- [ ] Validates with supports_mcp_server() before converting\n- [ ] Returns Result\u003cValue, Error\u003e\n- [ ] Converts stdio to type: local with command array\n- [ ] Converts http to type: remote\n- [ ] Handles oauth configuration\n- [ ] Uses {env:VAR} syntax\n- [ ] Unit tests cover validation failures (e.g., SSE rejected)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:36:21.457463Z","updated_at":"2025-12-26T13:36:00.208279Z","closed_at":"2025-12-26T13:36:00.208279Z","close_reason":"Implemented mcp_to_native() converters","dependencies":[{"issue_id":"get-harness-nfd","depends_on_id":"get-harness-vvg","type":"blocks","created_at":"2025-12-26T09:40:34.326936Z","created_by":"daemon"}]}
{"id":"get-harness-ozq","title":"Public MCP Config Parsers","description":"Expose the internal MCP config parsers as public API through clean Harness methods. Currently `parse_mcp_server()` and `parse_mcp_servers()` are `pub(crate)`.\n\n## Deliverables\n- Add to `Harness` impl:\n```rust\n/// Parse MCP servers from harness-native config format\n/// \n/// Takes a serde_json::Value representing the full config file content.\n/// Returns parsed servers as name → McpServer map.\npub fn parse_mcp_config(\u0026self, config: \u0026serde_json::Value) -\u003e Result\u003cHashMap\u003cString, McpServer\u003e\u003e\n\n/// Parse a single MCP server from harness-native format\npub fn parse_mcp_server_config(\u0026self, name: \u0026str, value: \u0026serde_json::Value) -\u003e Result\u003cMcpServer\u003e\n```\n- Delegate to existing `parse_mcp_servers()` / `parse_mcp_server()` in harness modules\n- Keep internal functions as `pub(crate)` (no breaking change)\n- Document expected JSON structure for each harness in doc comments\n\n## Acceptance Criteria\n- Can parse Claude Code `{ \"mcpServers\": { ... } }` format\n- Can parse OpenCode `{ \"mcp\": { ... } }` format\n- Can parse Goose `{ \"extensions\": { ... } }` format\n- Error messages indicate which harness format was expected\n- Doc examples showing JSON → HashMap\u003cString, McpServer\u003e workflow","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:20:57.479347Z","updated_at":"2025-12-27T13:59:02.683682Z","closed_at":"2025-12-27T13:59:02.683682Z","close_reason":"All phases complete - public MCP config parsers added with tests"}
{"id":"get-harness-ozq.1","title":"Normalize OpenCode parser","description":"## Context\nRemove disabled-server filtering from OpenCode's parse_mcp_servers so it returns all servers like Claude Code and Goose.\n\n## Key Changes\n- `src/harness/opencode.rs` L163-171 - Remove the enabled check and conditional push\n\n## Current Code to Remove\n```rust\nlet enabled = match \u0026server {\n    McpServer::Stdio(s) =\u003e s.enabled,\n    McpServer::Http(s) =\u003e s.enabled,\n    McpServer::Sse(s) =\u003e s.enabled,\n};\nif enabled {\n    servers.push((name.clone(), server));\n}\n```\n\n## Replace With\n```rust\nservers.push((name.clone(), server));\n```\n\n## Success Criteria\n- [ ] cargo build passes\n- [ ] cargo test passes\n- [ ] cargo clippy clean\n\n## References\n- Full plan: `.beads/artifacts/get-harness-ozq/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:28:31.777635Z","updated_at":"2025-12-27T12:48:37.827691Z","closed_at":"2025-12-27T12:48:37.827691Z","close_reason":"Phase complete - tests passing","dependencies":[{"issue_id":"get-harness-ozq.1","depends_on_id":"get-harness-ozq","type":"parent-child","created_at":"2025-12-27T12:28:31.77886Z","created_by":"daemon"}]}
{"id":"get-harness-ozq.2","title":"Add parse_mcp_config public methods","description":"## Context\nAdd two public methods to Harness struct for parsing MCP configs from harness-native JSON format.\n\n## Key Changes\n- `src/harness/mod.rs` L1 - Add `use std::collections::HashMap;`\n- `src/harness/mod.rs` after L634 - Add `parse_mcp_config` method\n- `src/harness/mod.rs` after that - Add `parse_mcp_server_config` method\n\n## Patterns to Follow\n- See `mcp_to_native` at L621-634 for dispatch pattern\n- Match on `self.kind` and delegate to `module::parse_mcp_servers()`\n\n## Method Signatures\n```rust\npub fn parse_mcp_config(\u0026self, config: \u0026serde_json::Value) -\u003e Result\u003cHashMap\u003cString, McpServer\u003e\u003e\npub fn parse_mcp_server_config(\u0026self, name: \u0026str, value: \u0026serde_json::Value) -\u003e Result\u003cMcpServer\u003e\n```\n\n## Key Details\n- Convert Vec to HashMap via `.into_iter().collect()`\n- Wrap errors in parse_mcp_server_config to include server name\n- Add doc comments with examples for each harness format\n\n## Success Criteria\n- [ ] cargo build passes\n- [ ] cargo doc --no-deps builds\n- [ ] cargo clippy clean\n\n## References\n- Full plan: `.beads/artifacts/get-harness-ozq/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:28:39.006327Z","updated_at":"2025-12-27T13:03:05.63142Z","closed_at":"2025-12-27T13:03:05.63142Z","close_reason":"Phase 2 complete - parse_mcp_config methods added, tests passing","dependencies":[{"issue_id":"get-harness-ozq.2","depends_on_id":"get-harness-ozq","type":"parent-child","created_at":"2025-12-27T12:28:39.012252Z","created_by":"daemon"}]}
{"id":"get-harness-ozq.3","title":"Add tests for MCP parser public API","description":"## Context\nAdd unit tests for the new parse_mcp_config and parse_mcp_server_config public methods.\n\n## Key Changes\n- `src/harness/mod.rs` in `#[cfg(test)] mod tests` section - Add 5 new tests\n\n## Tests to Add\n1. `parse_mcp_config_claude_code` - basic parsing with mcpServers key\n2. `parse_mcp_config_opencode` - basic parsing with mcp key\n3. `parse_mcp_config_opencode_includes_disabled` - verify disabled servers included\n4. `parse_mcp_config_goose` - basic parsing with extensions key\n5. `parse_mcp_server_config_error_includes_name` - verify error contains server name\n\n## Patterns to Follow\n- See existing tests at bottom of mod.rs (L877+)\n- Use `serde_json::json!` macro for test configs\n\n## Success Criteria\n- [ ] cargo test passes\n- [ ] cargo test parse_mcp runs new tests\n- [ ] OpenCode disabled-server test explicitly passes\n\n## References\n- Full plan: `.beads/artifacts/get-harness-ozq/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:28:45.178927Z","updated_at":"2025-12-27T13:58:50.128313Z","closed_at":"2025-12-27T13:58:50.128313Z","close_reason":"Phase 3 complete - 5 tests added, all passing","dependencies":[{"issue_id":"get-harness-ozq.3","depends_on_id":"get-harness-ozq","type":"parent-child","created_at":"2025-12-27T12:28:45.183077Z","created_by":"daemon"}]}
{"id":"get-harness-p4w","title":"Define core types and enums","description":"Define the foundational types that all resource handlers will use.\n\n## Types to Define\n\n### FileFormat enum\n```rust\npub enum FileFormat {\n    Json,\n    Jsonc,  // JSON with comments\n    Yaml,\n    Markdown,\n    MarkdownWithFrontmatter,\n}\n```\n\n### DirectoryStructure enum\n```rust\npub enum DirectoryStructure {\n    /// Files directly in directory: commands/foo.md\n    Flat { file_pattern: String },\n    \n    /// Subdirectory per resource: skills/foo/SKILL.md\n    Nested { \n        subdir_pattern: String,\n        file_name: String,\n    },\n}\n```\n\n### DirectoryResource struct\n```rust\npub struct DirectoryResource {\n    pub path: PathBuf,\n    pub exists: bool,\n    pub structure: DirectoryStructure,\n    pub file_format: FileFormat,\n}\n```\n\n### ConfigResource struct\n```rust\npub struct ConfigResource {\n    pub file: PathBuf,\n    pub file_exists: bool,\n    pub key_path: String,  // JSON pointer\n    pub format: FileFormat,\n    pub schema_url: Option\u003cString\u003e,\n}\n```\n\n## Location\nCreate new file: src/types.rs (or expand existing)\n\n## Acceptance Criteria\n- [ ] All types derive Debug, Clone\n- [ ] Serde support for serialization\n- [ ] Doc comments on all public items","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T09:34:05.120042Z","updated_at":"2025-12-26T10:06:55.740172Z","closed_at":"2025-12-26T10:06:55.740172Z","close_reason":"Complete - all types implemented with serde support"}
{"id":"get-harness-p9y","title":"[Farrier] Implement multi-skill discovery","description":"Scan repository for nested skills, return Vec\u003cSkillDescriptor\u003e for consumer selection.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T14:41:33.109067Z","updated_at":"2026-01-01T14:41:33.109067Z","dependencies":[{"issue_id":"get-harness-p9y","depends_on_id":"get-harness-8cb","type":"blocks","created_at":"2026-01-01T14:41:45.792695Z","created_by":"daemon"}]}
{"id":"get-harness-puo","title":"Add AmpCode validation support","description":"Update src/validation.rs to add validation support for AmpCode.\n\n## Changes Required\n\nAdd `HarnessKind::AmpCode` to `validate_for_harness()` function to ensure proper validation of AMP-specific MCP features.\n\n## Acceptance Criteria\n- [ ] validate_for_harness() handles AmpCode\n- [ ] Validation correctly flags unsupported features (e.g., cwd)\n- [ ] Existing tests still pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T18:01:13.948554Z","updated_at":"2025-12-28T19:19:38.308902Z","closed_at":"2025-12-28T19:19:38.308902Z","close_reason":"Completed: validation.rs works via McpCapabilities::for_kind()","dependencies":[{"issue_id":"get-harness-puo","depends_on_id":"get-harness-zh0","type":"blocks","created_at":"2025-12-28T18:02:03.306657Z","created_by":"d0"}]}
{"id":"get-harness-qu7","title":"MCP Server Validation","description":"Implement format validation for MCP server configurations, checking for structural correctness independent of any specific harness.\n\n## Deliverables\n- Create `src/validation.rs` module\n- Define types:\n```rust\n#[derive(Debug, Clone, PartialEq, Eq)]\npub enum Severity {\n    Error,\n    Warning,\n}\n\n#[derive(Debug, Clone)]\npub struct ValidationIssue {\n    pub field: String,\n    pub message: String,\n    pub severity: Severity,\n}\n\nimpl ValidationIssue {\n    pub fn error(field: impl Into\u003cString\u003e, message: impl Into\u003cString\u003e) -\u003e Self\n    pub fn warning(field: impl Into\u003cString\u003e, message: impl Into\u003cString\u003e) -\u003e Self\n}\n```\n- Implement:\n```rust\n/// Validate MCP server config for structural correctness\npub fn validate_mcp_server(server: \u0026McpServer) -\u003e Vec\u003cValidationIssue\u003e\n```\n- Validation checks:\n  - Stdio: command is non-empty\n  - SSE/HTTP: URL is valid format (starts with http:// or https://)\n  - Timeout: if present, is reasonable (warn if \u003e 5 minutes)\n  - Env values: warn if EnvRef references suspiciously named vars\n- Export from `lib.rs`\n\n## Acceptance Criteria\n- Empty command returns Error\n- Invalid URL returns Error\n- Valid configs return empty Vec\n- Multiple issues can be returned from single validation\n- Unit tests for each validation rule","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:20:34.428526Z","updated_at":"2025-12-27T10:37:28.69349Z","closed_at":"2025-12-27T10:37:28.69349Z","close_reason":"All 5 phases complete - validation module implemented with tests"}
{"id":"get-harness-qu7.1","title":"Add url dependency","description":"## Context\nFirst phase of MCP validation - add the url crate for proper URL parsing.\n\n## Key Changes\n- `Cargo.toml` - Add `url = \"2\"` to dependencies\n\n## Success Criteria\n- [ ] `cargo check` passes\n- [ ] `url` crate available for import\n\n## References\n- Full plan: `.beads/artifacts/get-harness-qu7/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T10:06:27.436246Z","updated_at":"2025-12-27T10:10:53.350002Z","closed_at":"2025-12-27T10:10:53.350002Z","close_reason":"Added url = \"2\" dependency to Cargo.toml","dependencies":[{"issue_id":"get-harness-qu7.1","depends_on_id":"get-harness-qu7","type":"parent-child","created_at":"2025-12-27T10:06:27.438808Z","created_by":"daemon"}]}
{"id":"get-harness-qu7.2","title":"Create validation types","description":"## Context\nDefine core validation types in new src/validation.rs module.\n\n## Key Changes\n- `src/validation.rs` - Create new file with:\n  - `Severity` enum (Error, Warning)\n  - `ValidationIssue` struct (#[non_exhaustive], with severity, field, message, code)\n  - Issue code constants (CODE_EMPTY_COMMAND, CODE_INVALID_URL, etc.)\n  - Constructor helpers (ValidationIssue::error, ::warning)\n\n## Patterns to Follow\n- Model Severity on `FileFormat` enum in types.rs (simple, exhaustive)\n- Model ValidationIssue on `ConfigResource` struct (derive Debug, Clone, Serialize)\n\n## Success Criteria\n- [ ] Types compile\n- [ ] cargo doc generates documentation\n\n## References\n- Full plan: `.beads/artifacts/get-harness-qu7/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T10:06:33.342351Z","updated_at":"2025-12-27T10:20:00.121883Z","closed_at":"2025-12-27T10:20:00.121883Z","close_reason":"Created src/validation.rs with Severity enum, ValidationIssue struct, issue codes, and constructors","dependencies":[{"issue_id":"get-harness-qu7.2","depends_on_id":"get-harness-qu7","type":"parent-child","created_at":"2025-12-27T10:06:33.35067Z","created_by":"daemon"}]}
{"id":"get-harness-qu7.3","title":"Implement validation logic","description":"## Context\nImplement the core validate_mcp_server function with per-variant helpers.\n\n## Key Changes\n- `src/validation.rs` - Add:\n  - validate_mcp_server(\u0026McpServer) -\u003e Vec\u003cValidationIssue\u003e\n  - validate_stdio(s: \u0026StdioMcpServer) -\u003e Vec\u003cValidationIssue\u003e\n  - validate_sse(s: \u0026SseMcpServer) -\u003e Vec\u003cValidationIssue\u003e\n  - validate_http(s: \u0026HttpMcpServer) -\u003e Vec\u003cValidationIssue\u003e\n  - validate_url(url: \u0026str, field: \u0026str) -\u003e Option\u003cValidationIssue\u003e\n  - validate_timeout(ms: u64, field: \u0026str) -\u003e Option\u003cValidationIssue\u003e\n  - validate_env(env: \u0026HashMap\u003cString, EnvValue\u003e) -\u003e Vec\u003cValidationIssue\u003e\n\n## Validation Rules\n- Stdio: command non-empty (Error)\n- SSE/HTTP: URL valid via url crate, http(s) scheme (Error)\n- All: timeout \u003e 300000ms warns\n- Env: suspicious names (PASSWORD, SECRET, TOKEN, API_KEY, etc.) warn\n\n## Success Criteria\n- [ ] cargo check passes\n- [ ] All validation rules implemented\n\n## References\n- Full plan: `.beads/artifacts/get-harness-qu7/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T10:06:40.721285Z","updated_at":"2025-12-27T10:25:30.75635Z","closed_at":"2025-12-27T10:25:30.75635Z","close_reason":"Implemented validate_mcp_server with URL, timeout, and env validation","dependencies":[{"issue_id":"get-harness-qu7.3","depends_on_id":"get-harness-qu7","type":"parent-child","created_at":"2025-12-27T10:06:40.728929Z","created_by":"daemon"}]}
{"id":"get-harness-qu7.4","title":"Export validation module","description":"## Context\nWire up the validation module in lib.rs for public access.\n\n## Key Changes\n- `src/lib.rs` - Add:\n  - mod validation;\n  - pub use validation::{Severity, ValidationIssue, validate_mcp_server};\n\n## Success Criteria\n- [ ] cargo check passes\n- [ ] Types accessible from crate root\n\n## References\n- Full plan: `.beads/artifacts/get-harness-qu7/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T10:06:43.23632Z","updated_at":"2025-12-27T10:27:20.150113Z","closed_at":"2025-12-27T10:27:20.150113Z","close_reason":"Exported validation module in lib.rs with Severity, ValidationIssue, validate_mcp_server","dependencies":[{"issue_id":"get-harness-qu7.4","depends_on_id":"get-harness-qu7","type":"parent-child","created_at":"2025-12-27T10:06:43.241702Z","created_by":"daemon"}]}
{"id":"get-harness-qu7.5","title":"Add validation tests","description":"## Context\nComprehensive test coverage for all validation rules.\n\n## Key Changes\n- `src/validation.rs` - Add #[cfg(test)] mod tests with:\n  - test_stdio_empty_command_error\n  - test_stdio_valid_command_ok\n  - test_sse_invalid_url_error\n  - test_sse_valid_url_ok\n  - test_http_missing_scheme_error\n  - test_http_ftp_scheme_error\n  - test_timeout_excessive_warning\n  - test_timeout_normal_ok\n  - test_env_suspicious_name_warning\n  - test_env_normal_name_ok\n  - test_multiple_issues_collected\n\n## Patterns to Follow\n- See supports_mcp_server tests in harness/mod.rs for test structure\n- Use Arrange-Act-Assert pattern\n\n## Success Criteria\n- [ ] cargo test passes\n- [ ] All 11 test cases written\n\n## References\n- Full plan: `.beads/artifacts/get-harness-qu7/plan.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T10:06:48.976041Z","updated_at":"2025-12-27T10:35:05.16909Z","closed_at":"2025-12-27T10:35:05.16909Z","close_reason":"All 11 validation tests implemented and passing","dependencies":[{"issue_id":"get-harness-qu7.5","depends_on_id":"get-harness-qu7","type":"parent-child","created_at":"2025-12-27T10:06:48.983631Z","created_by":"daemon"}]}
{"id":"get-harness-r3z","title":"Skill Type Definition","description":"Define the `Skill` struct representing a parsed skill file, with parsing and serialization support.\n\n## Deliverables\n- Add to `src/skill.rs`:\n```rust\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct Skill {\n    pub name: String,\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub description: Option\u003cString\u003e,\n    #[serde(default, skip_serializing_if = \"Vec::is_empty\")]\n    pub triggers: Vec\u003cString\u003e,\n    pub body: String,\n    #[serde(flatten)]\n    pub metadata: HashMap\u003cString, serde_yaml::Value\u003e,\n}\n```\n- Implement:\n```rust\n/// Parse skill from markdown content\npub fn parse_skill(content: \u0026str) -\u003e Result\u003cSkill\u003e\n\nimpl Skill {\n    /// Serialize back to SKILL.md format\n    pub fn to_markdown(\u0026self) -\u003e String\n}\n```\n- Handle harness-specific frontmatter keys (name, description, triggers are common; others go to metadata)\n\n## Acceptance Criteria\n- Round-trip: `parse_skill(skill.to_markdown())` equals original skill\n- Unknown frontmatter keys preserved in `metadata`\n- Empty/missing optional fields handled gracefully\n- Works with Claude Code, OpenCode, and Goose skill formats\n- Doc examples for parsing and serialization","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:20:20.33061Z","updated_at":"2025-12-27T09:44:29.86589Z","closed_at":"2025-12-27T09:44:29.86589Z","close_reason":"All phases complete - tests passing","dependencies":[{"issue_id":"get-harness-r3z","depends_on_id":"get-harness-bx0","type":"blocks","created_at":"2025-12-27T07:21:10.70316Z","created_by":"daemon"}]}
{"id":"get-harness-s7s","title":"Implement plugins() for OpenCode","description":"Implement plugins directory resource for OpenCode ONLY.\n\n## CRITICAL DISTINCTION\nPlugins are NOT MCP servers! They are completely different:\n- Plugins: JS/TS code extensions that add tools/capabilities\n- MCP: Protocol servers that expose tools via stdin/stdout or HTTP\n\n## Paths\n- Global: ~/.config/opencode/plugin/\n- Project: .opencode/plugin/\n\n## Structure\nEach plugin is a JS/TS file or directory with index.ts\n\n## API\n```rust\n// Only OpenCode has plugins\nfn plugins(\u0026self) -\u003e Option\u003cDirectoryResource\u003e {\n    Some(DirectoryResource {\n        global_path: Some(\"~/.config/opencode/plugin\"),\n        project_path: Some(\".opencode/plugin\"),\n        structure: DirectoryStructure::FlatFiles(\"*.{js,ts}\"),\n    })\n}\n```\n\n## Files\n- src/harness/opencode.rs\n- src/harness/claude_code.rs (return None)\n- src/harness/goose.rs (return None)\n\n## Acceptance Criteria\n- [ ] Implement for OpenCode\n- [ ] Return None for Claude Code\n- [ ] Return None for Goose\n- [ ] Unit test","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:38:28.595832Z","updated_at":"2025-12-26T15:09:29.120732Z","closed_at":"2025-12-26T15:09:29.120732Z","close_reason":"Implementation verified against HARNESS_SPEC.md - all resource methods return correct values, tests pass","dependencies":[{"issue_id":"get-harness-s7s","depends_on_id":"get-harness-gye","type":"blocks","created_at":"2025-12-26T09:40:43.754718Z","created_by":"daemon"}]}
{"id":"get-harness-tgn","title":"Apply patches from docs/patches.md research findings","description":"Apply 3 patches identified from official documentation research that correct discrepancies between get-harness implementation and actual harness capabilities.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T06:50:07.38077Z","updated_at":"2025-12-27T07:09:19.457731Z","closed_at":"2025-12-27T07:09:19.457731Z","close_reason":"All 3 patches applied - skills support, MCP capabilities, documentation"}
{"id":"get-harness-tgn.1","title":"Add Goose skills directory support","description":"Goose DOES support skills via the Skills Extension. Add skills_dir() implementation returning ~/.config/agents/skills/ (global) and .agents/skills/ (project). Update skills() in mod.rs to return DirectoryResource for Goose.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T06:50:14.665134Z","updated_at":"2025-12-27T07:03:33.464228Z","closed_at":"2025-12-27T07:03:33.464228Z","close_reason":"Skills directory support added - tests passing","dependencies":[{"issue_id":"get-harness-tgn.1","depends_on_id":"get-harness-tgn","type":"parent-child","created_at":"2025-12-27T06:50:14.675649Z","created_by":"daemon"}]}
{"id":"get-harness-tgn.2","title":"Fix McpCapabilities::for_kind() incorrect flags","description":"Fix 4 incorrect capability flags in src/mcp.rs:\n- ClaudeCode: oauth false→true (OAuth 2.0 via /mcp command)\n- ClaudeCode: timeout false→true (MCP_TIMEOUT env var)\n- OpenCode: sse false→true (SSE as fallback for StreamableHTTP)\n- Goose: oauth false→true (for streamable_http transport only)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T06:50:16.6401Z","updated_at":"2025-12-27T07:03:36.739282Z","closed_at":"2025-12-27T07:03:36.739282Z","close_reason":"McpCapabilities flags corrected - tests passing","dependencies":[{"issue_id":"get-harness-tgn.2","depends_on_id":"get-harness-tgn","type":"parent-child","created_at":"2025-12-27T06:50:16.647542Z","created_by":"daemon"}]}
{"id":"get-harness-tgn.3","title":"Update HARNESS_SPEC.md with corrected documentation","description":"Add missing sections to HARNESS_SPEC.md:\n- Skills Support Matrix (all 3 harnesses support skills)\n- MCP Capabilities Matrix (corrected values)\n- Timeout Configuration (units and config methods)\n- OAuth Support (transports and features per harness)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-27T06:50:19.042732Z","updated_at":"2025-12-27T07:07:53.937932Z","closed_at":"2025-12-27T07:07:53.937932Z","close_reason":"Added 4 sections to HARNESS_SPEC.md: Skills Support, MCP Capabilities, Timeout Configuration, OAuth Support","dependencies":[{"issue_id":"get-harness-tgn.3","depends_on_id":"get-harness-tgn","type":"parent-child","created_at":"2025-12-27T06:50:19.051962Z","created_by":"daemon"}]}
{"id":"get-harness-ugp","title":"[Farrier] Implement fetch-to-buffer","description":"Download skill files and return as HashMap\u003cPathBuf, Vec\u003cu8\u003e\u003e for consumer to decide where to write.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T14:41:31.063258Z","updated_at":"2026-01-01T14:41:31.063258Z","dependencies":[{"issue_id":"get-harness-ugp","depends_on_id":"get-harness-8cb","type":"blocks","created_at":"2026-01-01T14:41:45.715248Z","created_by":"daemon"}]}
{"id":"get-harness-v69","title":"Update tests for new Harness API","description":"## Context\nPhase 3 of Harness API refactor. Updates all tests to use new API.\n\n## Key Changes\n- `src/harness/mod.rs` (tests) - Remove/update tests using old `*_path()` methods\n- `src/harness/mod.rs` (tests) - Add tests for `HarnessKind::ALL`\n- `src/harness/mod.rs` (tests) - Add tests for `new()`, `is_installed()`, `installed()`\n- `src/harness/mod.rs` (tests) - Add tests for `plugins()`, `agents()` returning None for non-OpenCode\n\n## Patterns to Follow\n- Use early-return pattern: `if !is_installed() { return; }`\n- Test both `Ok(None)` and `Ok(Some(_))` cases\n- Check `DirectoryStructure` and `FileFormat` in resource tests\n\n## Success Criteria\n- [ ] `cargo test` passes (all tests)\n- [ ] `cargo clippy --all-targets -- -D warnings` clean\n- [ ] No dead code warnings\n- [ ] Coverage for all new methods\n\n## References\n- Full plan: `.beads/artifacts/get-harness-gye/plan.md` (Phase 3 section)\n- Existing test patterns: `src/harness/mod.rs:106-311`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T11:17:50.680311Z","updated_at":"2025-12-26T12:02:00.793353Z","closed_at":"2025-12-26T12:02:00.793353Z","close_reason":"Tests already added during Phase 2 implementation. All 81 tests pass, clippy clean.","dependencies":[{"issue_id":"get-harness-v69","depends_on_id":"get-harness-d6a","type":"blocks","created_at":"2025-12-26T11:17:59.793211Z","created_by":"daemon"}]}
{"id":"get-harness-vvg","title":"Define MCP normalized types","description":"Define the normalized MCP server types that work across all harnesses.\n\n## McpServer Enum\n\n```rust\n#[derive(Debug, Clone, Serialize, Deserialize)]\n#[serde(tag = \"transport\", rename_all = \"snake_case\")]\npub enum McpServer {\n    Stdio(StdioMcpServer),\n    Sse(SseMcpServer),\n    Http(HttpMcpServer),\n}\n```\n\n## StdioMcpServer\n\n```rust\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct StdioMcpServer {\n    pub command: String,\n    #[serde(default, skip_serializing_if = \"Vec::is_empty\")]\n    pub args: Vec\u003cString\u003e,\n    #[serde(default, skip_serializing_if = \"HashMap::is_empty\")]\n    pub env: HashMap\u003cString, EnvValue\u003e,\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub cwd: Option\u003cPathBuf\u003e,\n    #[serde(default = \"default_true\")]\n    pub enabled: bool,\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub timeout_ms: Option\u003cu64\u003e,\n}\n```\n\n## SseMcpServer (for SSE transport)\n\n```rust\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct SseMcpServer {\n    pub url: String,\n    #[serde(default, skip_serializing_if = \"HashMap::is_empty\")]\n    pub headers: HashMap\u003cString, EnvValue\u003e,\n    #[serde(default = \"default_true\")]\n    pub enabled: bool,\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub timeout_ms: Option\u003cu64\u003e,\n}\n```\n\n## HttpMcpServer (for Streamable HTTP transport)\n\n```rust\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct HttpMcpServer {\n    pub url: String,\n    #[serde(default, skip_serializing_if = \"HashMap::is_empty\")]\n    pub headers: HashMap\u003cString, EnvValue\u003e,\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub oauth: Option\u003cOAuthConfig\u003e,\n    #[serde(default = \"default_true\")]\n    pub enabled: bool,\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub timeout_ms: Option\u003cu64\u003e,\n}\n```\n\n## OAuthConfig\n\n```rust\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct OAuthConfig {\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub client_id: Option\u003cString\u003e,\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub client_secret: Option\u003cEnvValue\u003e,\n    #[serde(default, skip_serializing_if = \"Option::is_none\")]\n    pub scope: Option\u003cString\u003e,\n}\n```\n\n## Location\nCreate new file: src/mcp.rs\n\n## Acceptance Criteria\n- [ ] All types derive Debug, Clone, Serialize, Deserialize\n- [ ] Serde annotations for clean JSON output\n- [ ] Doc comments explaining each field\n- [ ] Unit tests for serialization/deserialization","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T09:34:42.843514Z","updated_at":"2025-12-26T10:54:27.383034Z","closed_at":"2025-12-26T10:54:27.383034Z","close_reason":"Complete - all requirements verified, tests passing","dependencies":[{"issue_id":"get-harness-vvg","depends_on_id":"get-harness-6or","type":"blocks","created_at":"2025-12-26T09:40:31.291784Z","created_by":"daemon"}]}
{"id":"get-harness-xat","title":"Fix AMP Code MCP type inference from field presence","description":"AMP Code MCP parsing fails for HTTP/SSE servers without explicit type field. Parser unconditionally defaults to stdio, which fails when url is present but command is not.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T19:27:06.969999Z","updated_at":"2025-12-29T19:44:36.245688Z","closed_at":"2025-12-29T19:44:36.245688Z","close_reason":"Fixed: MCP type inference now works from field presence"}
{"id":"get-harness-xdx","title":"Fix OpenCode config filename: opencode.json should be opencode.jsonc","description":"harness-locate returns wrong config filename for OpenCode. Returns opencode.json but actual file is opencode.jsonc (JSON with Comments). Breaks config lookup silently.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T21:21:51.918745Z","updated_at":"2025-12-29T21:29:03.263993Z","closed_at":"2025-12-29T21:29:03.263993Z","close_reason":"Fixed: opencode.json -\u003e opencode.jsonc. Tests passing."}
{"id":"get-harness-z86","title":"Add EnvValue support for AmpCode syntax","description":"Update src/types.rs to handle AMP's environment variable syntax.\n\n## AMP Env Var Syntax\n\nAMP uses `${VAR_NAME}` syntax, same as Claude Code.\n\n## Changes Required\n\n1. Update `EnvValue::to_native()` for `HarnessKind::AmpCode`:\n   - `EnvValue::Plain(s)` → `s.clone()`\n   - `EnvValue::Env(var)` → `format!(\"${{{}}}\")`\n\n2. Update `EnvValue::from_native()` for `HarnessKind::AmpCode`:\n   - Parse `${VAR}` pattern → `EnvValue::Env(var)`\n   - Plain string → `EnvValue::Plain(s)`\n\n## Note\nSince AMP uses the same syntax as Claude Code, this may be able to reuse the Claude Code implementation path.\n\n## Acceptance Criteria\n- [ ] `EnvValue::to_native(HarnessKind::AmpCode, ...)` produces correct format\n- [ ] `EnvValue::from_native(HarnessKind::AmpCode, ...)` parses correctly\n- [ ] Unit tests for both directions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T18:00:59.883751Z","updated_at":"2025-12-28T19:18:59.287951Z","closed_at":"2025-12-28T19:18:59.287951Z","close_reason":"Completed: EnvValue support added in types.rs (combined ClaudeCode|AmpCode arms)","dependencies":[{"issue_id":"get-harness-z86","depends_on_id":"get-harness-zh0","type":"blocks","created_at":"2025-12-28T18:01:58.099171Z","created_by":"d0"}]}
{"id":"get-harness-zh0","title":"Add HarnessKind::AmpCode variant to types.rs","description":"Add the AmpCode variant to the HarnessKind enum in src/types.rs.\n\n## Changes Required\n\n1. Add `AmpCode` to the `HarnessKind` enum\n2. Update `HarnessKind::ALL` array to include `AmpCode`\n3. Add `as_str()` implementation returning \"amp-code\" or similar\n4. Add `Display` implementation  \n5. Add `binary_names()` returning `\u0026[\"amp\"]`\n\n## Acceptance Criteria\n- [ ] `HarnessKind::AmpCode` variant exists\n- [ ] `HarnessKind::ALL` contains 4 elements\n- [ ] `cargo check` passes (will have match arm warnings until other beads complete)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T18:00:06.280615Z","updated_at":"2025-12-28T18:21:07.689931Z","closed_at":"2025-12-28T18:21:07.689931Z","close_reason":"Complete - AmpCode variant added to types.rs. Build blocked until dependent beads add match arms."}
{"id":"get-harness-zhi","title":"Add Scope::Custom for profile-scoped directory resolution","description":"No way to query expected directory structure for custom profile locations. Only Scope::Global and Scope::Project exist. Need Scope::Custom(PathBuf) or Scope::Profile(PathBuf).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T21:21:59.971194Z","updated_at":"2025-12-29T21:52:10.201919Z","closed_at":"2025-12-29T21:52:10.201919Z","close_reason":"Added Scope::Custom variant with inherited structure"}
